"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4715],{24825:function(e,t,n){n.d(t,{j:function(){return s}});var r=n(1163),a=n(67294),i=n(96823),o=n(96602);function s(e,t,n){var s,u=a.useState(!1),c=(0,r.Z)(u,2),d=c[0],p=c[1],f=d?t:void 0,h=a.useMemo(function(){return(0,i.N)(e.EmbedUrl,{in_playlist:null!=n?n:void 0,t:f})},[e.EmbedUrl,n,f]),y=a.useMemo(function(){return(0,i.N)(e.PublishedUrl,{in_playlist:null!=n?n:void 0,t:f})},[e.PublishedUrl,n,f]),m=null!==(s=e.ShareUrl)&&void 0!==s?s:y;return a.useMemo(function(){var t=encodeURIComponent(e.Title),n=encodeURIComponent(m),r=(0,o.rP)({title:e.Title,embedUrl:h});return{config:{download:l({url:function(){var t=new URL(e.AudioUrl);return t.searchParams.set("download","true"),t.toString()},onClick:null}),email:l({url:function(){return"mailto:?subject=".concat(t,"&body=").concat(n)},onClick:null}),facebook:l({url:function(){return"https://www.facebook.com/sharer/sharer.php?u=".concat(n)},onClick:function(e){window.open(e,"facebook_share","height=320, width=640, resizable=yes, scrollbars=yes")}}),twitter:l({url:function(){return"https://twitter.com/intent/tweet?url=".concat(n,"&text=").concat(t)},onClick:function(e){window.open(e,"twitter_share","height=300, width=640, resizable=yes, scrollbars=yes")}}),whatsApp:l({url:function(){return"https://wa.me/?text=".concat(t," ").concat(n)},onClick:function(e){window.open(e,"whatsapp_share","height=300, width=640, resizable=yes, scrollbars=yes")}})},embedCode:r,shareUrl:m,showUrl:y,addTimestamp:d,setAddTimestamp:p}},[d,e,h,m,y])}function l(e){var t=e.url,n=e.onClick,r=t();return{href:r,onClick:n?function(e){e.preventDefault(),n(r)}:void 0}}},30083:function(e,t,n){n.d(t,{X:function(){return d}});var r=n(58823),a=n(70917),i=n(48622),o=n(35944),s="input[type=checkbox]:checked",l=s+" + &",u=s+" + span &",c="input[type=checkbox]:focus + span &, input[type=checkbox] + span:hover &";function d(e){var t,n=e.className,s=e.checked,d=e.children,p=e.onChange;return(0,o.BX)("label",{className:n,children:[(0,o.tZ)("input",{type:"checkbox",css:(0,a.iv)({position:"absolute","[dir=ltr] &":{left:-9999},"[dir=rtl] &":{right:-9999}},"",""),checked:s,onChange:function(e){return p(e.target.checked)}}),(0,o.BX)("span",{css:(0,a.iv)((0,r.Z)({cursor:"pointer",position:"relative",opacity:"0.6","[dir=ltr] &":{paddingLeft:"1.7em"},'[dir="rtl"] &':{paddingRight:"1.7em"}},l,{opacity:"1"}),"",""),children:[(0,o.tZ)("span",{role:"presentation",css:(0,a.iv)((0,r.Z)({width:"1em",height:"1em",position:"absolute",opacity:"0.7",border:"0.15em solid currentColor",borderRadius:4,boxSizing:"content-box",top:0,"[dir=ltr] &":{left:0},"[dir=rtl] &":{right:0}},c,{opacity:"1"}),"","")}),(0,o.tZ)(i.NO,{css:(0,a.iv)((t={position:"absolute",width:"0.98em",height:"0.98em",opacity:"0",top:"0.15em","[dir=ltr] &":{left:"0.15em"},"[dir=rtl] &":{right:"0.15em"}},(0,r.Z)(t,c,{opacity:"0.5"}),(0,r.Z)(t,u,{opacity:"1"}),t),"","")}),d]})]})}},48785:function(e,t,n){n.d(t,{m:function(){return c}}),n(67294);var r=n(34627),a=n(51674),i=n(62725),o=n(87792),s=n(27029),l=n(1825),u=n(35944);function c(e){var t=e.withContent,n=(0,a.j)(),c=(0,r.Y)();if(!n.showBackgroundImage)return null;var d=function(e,t){if(e)return"full";switch(t.embedSize){case"Square":return"topAndBottom";case"Wide":return"full"}}(t,n);return(0,u.BX)("div",{css:[l.v8,"overflow:hidden;",""],children:[(0,u.tZ)(i.Z,{clip:c}),"Square"===n.embedSize&&(0,u.tZ)("img",{css:[{height:"auto",left:"50%",maxWidth:"100vh",position:"absolute",top:t?0:"50%",transform:t?"translate(-50%, 0)":"translate(-50%,-50%)",width:"100%",display:"block"},t&&{maskImage:"linear-gradient(to bottom, black 90%, transparent 100%)"},"",""],src:(0,s.Hn)(c.ImageUrl,"medium"),alt:""}),function(){switch(d){case"full":return(0,u.tZ)(o.V,{});case"topAndBottom":return(0,u.tZ)(o.g,{opacity:.65,heightTop:150,heightBottom:250})}}()]})}},40377:function(e,t,n){n.d(t,{C:function(){return eK}});var r=n(67294),a=n(89747),i=n(1163),o=n(81681),s=n(34627),l=n(51674),u=n(62725),c=n(87792),d=n(1825),p=n(35944);function f(e){var t=e.children,n=e.hidden,r=e.setRootRef,a=(0,l.j)(),i=(0,s.Y)();return(0,p.BX)("div",{ref:r,css:[d.v8,{color:a.colorForeground,backgroundColor:a.colorBackground,zIndex:0},"",""],style:void 0!==n&&n?{visibility:"hidden"}:void 0,children:[(0,p.tZ)(h,{clip:i}),t]})}var h=function(e){var t=e.clip;return(0,l.j)().showBackgroundImage?(0,p.BX)("div",{css:[d.v8,{overflow:"hidden",zIndex:-1},"",""],children:[(0,p.tZ)(u.Z,{clip:t}),(0,p.tZ)(c.V,{})]}):null},y=n(36959);function m(e){var t=e.rootRef,n=e.focusTrapInitialElement,a=e.hidden,i=void 0!==a&&a,o=e.onClose,s=r.useRef({focusTrapInitialElement:n,onClose:o});return r.useEffect(function(){s.current.focusTrapInitialElement=n,s.current.onClose=o}),r.useEffect(function(){if(!i&&t){var e,n=(0,y.v)(t,{clickOutsideDeactivates:!1,escapeDeactivates:!1,initialFocus:null!==(e=s.current.focusTrapInitialElement)&&void 0!==e?e:void 0});n.activate();var r=function(e){("Escape"===e.code||27===e.keyCode)&&s.current.onClose()};return document.addEventListener("keydown",r),function(){n.deactivate(),document.removeEventListener("keydown",r)}}},[i,t]),{closeOverlay:o}}function v(e){var t=e.player,n=r.useState(null),a=(0,i.Z)(n,2),s=a[0],l=a[1],u=r.useState(null),c=(0,i.Z)(u,2),d=c[0],h=c[1],y="ad"===t.mode.type?t.mode:null,v=null===y,g=(null==y?void 0:y.adCacheState.type)==="loading";m({rootRef:s,focusTrapInitialElement:d,hidden:v,onClose:function(){}});var b=r.useMemo(function(){var e,t;return y&&"loaded"===y.adCacheState.type?{companionImageUrl:null!==(e=null===(t=y.adCacheState.adData.media.companion)||void 0===t?void 0:t.companionImageUrl)&&void 0!==e?e:null,isAdClickable:!!y.adCacheState.adData.creative.videoClickThroughURLTemplate,mediaType:y.adCacheState.adData.media.type,skipDelay:y.adCacheState.adData.skipDelay}:{companionImageUrl:null,isAdClickable:!1,mediaType:"audio",skipDelay:null}},[y]),_=b.companionImageUrl,S=b.isAdClickable,k=b.mediaType,w=b.skipDelay,C=t.adMediaState.currentTime,Z=t.adMediaState.duration;return(0,p.tZ)(f,{hidden:v,setRootRef:l,children:(0,p.tZ)(o.S,{loading:g,children:(0,p.tZ)(o.c,{companionImageUrl:_,isAdClickable:S,isBuffering:t.adMediaState.isBuffering,isPlaying:t.adMediaState.isPlaying,mediaType:k,playbackProgress:null!==Z?C/Z:0,playbackTimeRemaining:null!==Z?Z-C:null,skipTimeRemaining:null!==w?w-C:null,videoElement:t.adVideoElement,setPlayButtonElement:h,onAdButtonClick:function(){t.adClick()},onPlaybackToggle:function(){t.togglePlayback()},onSkip:function(){t.adSkip()}})})})}var g=n(70917),b=n(44012),_=n(36034),S=n(64127),k=n(86264),w=n(48622),C=n(51023),Z=n(41818),T={name:"dzbs2",styles:'flex:1 auto;[dir="ltr"] &{padding-right:38px;}[dir="rtl"] &{padding-left:38px;}'},P={name:"zjik7",styles:"display:flex"};function A(e){var t=e.children,n=e.onClose,a=(0,l.j)(),o=(0,C.ql)().intl,s=r.useState(null),u=(0,i.Z)(s,2),c=u[0],h=u[1],y=m({rootRef:c,onClose:n}).closeOverlay;return(0,p.tZ)(f,{setRootRef:h,children:(0,p.BX)("div",{css:[d.v8,"display:flex;flex-direction:column;overflow-x:hidden;overflow-y:auto;padding:15px;",""],children:[(0,p.tZ)(j,{children:(0,p.tZ)(_._c,{type:"round",title:o.formatMessage({id:"AwDfR7",defaultMessage:[{type:0,value:"Close"}]}),onClick:y,children:(0,p.tZ)(w.bM,{})})}),(0,p.tZ)("div",{css:T,children:t}),(0,p.tZ)(S.q,{height:12}),(0,p.BX)("div",{css:P,children:[(0,p.tZ)("a",{href:(0,k.K5)("omnyCmsBaseUrl")+"/policies/listener/?utm_source=omnyfm-embed&utm_medium=player",target:"_blank",rel:"noreferrer",css:[d.PO,"font-size:12.6px;line-height:1.7;opacity:0.6;&:hover, &:focus{opacity:1;}",""],children:(0,p.tZ)(b.Z,{id:"eeGno2",defaultMessage:[{type:0,value:"Listener privacy policy"}]})}),(0,p.tZ)(S.g,{}),function(){switch(a.branding.type){case"branded":switch(a.branding.wide.type){case"custom":return(0,p.tZ)(M,{href:a.branding.wide.logoUrl,logoImageSrc:a.branding.wide.logoImageSrc,title:a.branding.wide.logoTitle});case"none":return null}break;case"omny":return(0,p.tZ)(x,{})}}()]})]})})}function O(e){var t=e.title,n=e.children,r=e.textWrapping;return(0,p.tZ)("h3",{title:t,css:[r?null:d.FF,Z.v.bold,"font-size:15.5px;line-height:165%;text-transform:uppercase;",""],children:n})}function E(e){var t=e.title,n=e.children;return(0,p.tZ)("h4",{title:t,css:[Z.v.bold,"font-size:12.6px;line-height:165%;opacity:0.5;text-transform:uppercase;",""],children:n})}function M(e){var t=e.href,n=e.logoImageSrc,r=e.title;return(0,p.tZ)("a",{href:null!=t?t:void 0,title:null!=r?r:void 0,target:"_blank",rel:"noreferrer",css:(0,g.iv)({height:24,display:"flex",alignItems:"center"},"",""),children:(0,p.tZ)("img",{src:n,css:(0,g.iv)({display:"block",maxWidth:200,maxHeight:24},"",""),alt:null!=r?r:void 0})})}var I={name:"6x8swu",styles:"width:auto;height:14.39px;vertical-align:middle"};function x(){var e=(0,C.ql)().intl;return(0,p.tZ)("a",{css:[d.PO,"font-size:12.6px;line-height:1.7;opacity:0.6;&:hover, &:focus{opacity:1;}",""],href:"".concat((0,k.K5)("omnyCmsBaseUrl"),"/learn/?utm_source=omnyfm-embed&utm_medium=overlay"),target:"_blank",rel:"noreferrer",title:e.formatMessage({id:"GQjAJn",defaultMessage:[{type:0,value:"Powered by Omny Studio"}]}),children:(0,p.tZ)(b.Z,{id:"QL4EiB",defaultMessage:[{type:0,value:"Powered by "},{type:1,value:"logo"}],values:{logo:(0,p.tZ)(w.sE,{css:I})}})})}var D={name:"tpedl1",styles:"display:flex;justify-content:flex-end;opacity:0.8"},U={name:"1jsdrh6",styles:'position:fixed;width:0;[dir="ltr"] & > *{transform:translateX(-100%);}[dir="rtl"] & > *{transform:translateX(100%);}'};function j(e){var t=e.children;return(0,p.tZ)("div",{css:D,children:(0,p.tZ)("div",{css:U,children:t})})}var B=n.p+"static/media/applepodcasts-ar.49f5b35b.svg",R=n.p+"static/media/applepodcasts-cs.2e1b1c37.svg",N=n.p+"static/media/applepodcasts-da.d4fd3100.svg",L=n.p+"static/media/applepodcasts-de.2c1a6af2.svg",z=n.p+"static/media/applepodcasts-en.9de19a7b.svg",H=n.p+"static/media/applepodcasts-es.2644be7d.svg",V=n.p+"static/media/applepodcasts-fr.3d1d16fd.svg",F=n.p+"static/media/applepodcasts-he.bfbeb867.svg",q=n.p+"static/media/applepodcasts-it.9e7091fb.svg",X=n.p+"static/media/applepodcasts-ja.0c2e5d8d.svg",G=n.p+"static/media/applepodcasts-ms.1ae5b248.svg",W=n.p+"static/media/applepodcasts-nl.7c3db602.svg",Y=n.p+"static/media/applepodcasts-pt-br.c4c06cf9.svg",J=n.p+"static/media/applepodcasts-pt-pt.aaec67f7.svg",K=n.p+"static/media/applepodcasts-tr.d025c81d.svg",$=n.p+"static/media/googlepodcasts-ar.f081fe3d.svg",Q=n.p+"static/media/googlepodcasts-cs.068ce1d7.svg",ee=n.p+"static/media/googlepodcasts-da.5c7fcabd.svg",et=n.p+"static/media/googlepodcasts-de.3fa9a46c.svg",en=n.p+"static/media/googlepodcasts-en.c7e5774d.svg",er=n.p+"static/media/googlepodcasts-es.25d85bb1.svg",ea=n.p+"static/media/googlepodcasts-fr.26f87f87.svg",ei=n.p+"static/media/googlepodcasts-he.bf74e47e.svg",eo=n.p+"static/media/googlepodcasts-it.342698d8.svg",es=n.p+"static/media/googlepodcasts-ja.7d752462.svg",el=n.p+"static/media/googlepodcasts-ms.09d058a0.svg",eu=n.p+"static/media/googlepodcasts-nl.3e53e281.svg",ec=n.p+"static/media/googlepodcasts-pt-br.f2698070.svg",ed=n.p+"static/media/googlepodcasts-pt-pt.0d7fe0a8.svg",ep=n.p+"static/media/googlepodcasts-tr.52432546.svg",ef=(0,d.nD)(11,14);function eh(e){var t,n,a,o=e.directoryLinks,s=e.program,l=e.onClose,u=(0,C.ql)(),c=u.intl,d=(t=u.locale,n=r.useMemo(function(){switch(t){case"ar":return[B,$];case"cs":return[R,Q];case"da-beta":return[N,ee];case"de":return[L,et];case"en":return[z,en];case"es":return[H,er];case"fr-ca":case"fr-fr":return[V,ea];case"he":return[F,ei];case"it":return[q,eo];case"ja":return[X,es];case"ms":return[G,el];case"nl-beta":return[W,eu];case"pt-br":return[Y,ec];case"pt-pt":return[J,ed];case"tr":return[K,ep]}},[t]),{applePodcastsSrc:(a=(0,i.Z)(n,2))[0],googlePodcastsSrc:a[1]}),f=d.applePodcastsSrc,h=d.googlePodcastsSrc;return(0,p.BX)(A,{onClose:l,children:[(0,p.tZ)(O,{children:(0,p.tZ)(b.Z,{id:"kvqnxP",defaultMessage:[{type:0,value:"Follow "},{type:1,value:"programName"}],values:{programName:s.Name}})}),(0,p.tZ)(S.q,{height:10}),(0,p.BX)("ul",{css:ef.parentCss,children:[(0,p.tZ)(ey,{href:o.ApplePodcasts,imageSrc:f,imageWidth:141,imageHeight:34,title:c.formatMessage({id:"c+9ECi",defaultMessage:[{type:0,value:"Listen on Apple Podcasts"}]})}),(0,p.tZ)(ey,{href:o.GooglePodcasts,imageSrc:h,imageWidth:134,imageHeight:34,title:c.formatMessage({id:"3gTbcy",defaultMessage:[{type:0,value:"Listen on Google Podcasts"}]})})]}),(0,p.tZ)(S.q,{height:13}),(0,p.BX)("ul",{css:ef.parentCss,children:[(0,p.tZ)(ev,{href:o.IHeart,title:c.formatMessage({id:"JKXON4",defaultMessage:[{type:0,value:"Listen on iHeart"}]}),label:c.formatMessage({id:"IVNtlD",defaultMessage:[{type:0,value:"iHeart"}]}),styles:_.fh,Icon:w.FD}),(0,p.tZ)(ev,{href:o.Spotify,title:c.formatMessage({id:"LSQUN7",defaultMessage:[{type:0,value:"Listen on Spotify"}]}),label:c.formatMessage({id:"kalFZV",defaultMessage:[{type:0,value:"Spotify"}]}),styles:_.hX,Icon:w.PD}),(0,p.tZ)(ev,{href:o.TuneIn,title:c.formatMessage({id:"W30Prn",defaultMessage:[{type:0,value:"Listen on TuneIn"}]}),label:c.formatMessage({id:"A5L2ca",defaultMessage:[{type:0,value:"TuneIn"}]}),styles:_.ZX,Icon:w.eL}),(0,p.tZ)(ev,{href:o.RssFeed,title:c.formatMessage({id:"758ufn",defaultMessage:[{type:0,value:"Open RSS feed"}]}),label:c.formatMessage({id:"eDeMLC",defaultMessage:[{type:0,value:"RSS feed"}]}),styles:_.Yq,Icon:w.o0})]})]})}function ey(e){var t=e.href,n=e.imageSrc,r=e.imageWidth,a=e.imageHeight,i=e.title;return t?(0,p.tZ)("li",{css:ef.childCss,children:(0,p.tZ)("a",{href:t,title:i,target:"_blank",rel:"noreferrer",css:(0,g.iv)({display:"block",height:a},"",""),children:(0,p.tZ)("img",{src:n,alt:i,width:r,height:a})})}):null}var em={name:"157xhr7",styles:"width:16px;height:16px"};function ev(e){var t=e.href,n=e.title,r=e.label,a=e.styles,i=e.Icon;return t?(0,p.tZ)("li",{css:ef.childCss,children:(0,p.BX)("a",{href:t,target:"_blank",title:n,rel:"noreferrer",css:[d.PO,a,"",""],children:[i?(0,p.BX)(p.HY,{children:[(0,p.tZ)(i,{css:em}),(0,p.tZ)(S.g,{width:4})]}):null,r]})}):null}var eg=n(54490),eb=n(48189),e_=n(47366),eS=n(38601),ek={name:"17q6ypd",styles:"font-size:14px;line-height:1.7"},ew=(0,d.nD)(28,28),eC=(0,d.nD)(11,14);function eZ(e){var t,n=e.program,a=e.onClose,i=(0,l.j)(),o=(0,C.ql)().intl,u=(0,s.Y)(),c=r.useMemo(function(){return(0,eb.pB)(u.PublishedUtc)},[u.PublishedUtc]),d=null!==(t=u.ShareUrl)&&void 0!==t?t:(0,e_.hV)({clipProgram:n,clip:u}),f=n.SocialFacebook,h=n.Hidden?null:(0,e_.z)({program:n}),y=n.SocialTwitter,m=n.SocialWeb,v=n.SocialShowSupportLabel,g=n.SocialShowSupportUrl,k=v||o.formatMessage({id:"Yo7we+",defaultMessage:[{type:0,value:"Support the show"}]}),Z=v||o.formatMessage({id:"fqJT6M",defaultMessage:[{type:0,value:"Support the show"}]}),T=(0,_.ei)("default");return(0,p.BX)(A,{onClose:a,children:[(0,p.tZ)(O,{title:u.Title,textWrapping:!0,children:(0,p.tZ)("bdi",{children:u.Title})}),(0,p.tZ)(S.q,{height:12}),u.DescriptionHtml?(0,p.BX)(p.HY,{children:[(0,p.tZ)(E,{children:(0,p.tZ)(b.Z,{id:"ESAPIU",defaultMessage:[{type:0,value:"Description"}]})}),(0,p.tZ)(S.q,{height:3}),(0,p.tZ)(eO,{descriptionHtml:u.DescriptionHtml}),(0,p.tZ)(S.q,{height:12})]}):null,(0,p.BX)("div",{css:ew.parentCss,children:[(0,p.BX)("div",{css:ew.childCss,children:[(0,p.tZ)(E,{children:(0,p.tZ)(b.Z,{id:"Q1kzaa",defaultMessage:[{type:0,value:"Published"}]})}),(0,p.tZ)(S.q,{height:4}),(0,p.tZ)("p",{css:ek,children:(0,p.tZ)(eg.Ji,{value:c,year:"numeric",month:"long",day:"numeric",weekday:"long",hour12:!0,hour:"numeric",minute:"2-digit"})})]}),u.Season?(0,p.BX)("div",{css:ew.childCss,children:[(0,p.tZ)(E,{children:(0,p.tZ)(b.Z,{id:"vdnkpC",defaultMessage:[{type:0,value:"Season"}]})}),(0,p.tZ)(S.q,{height:4}),(0,p.tZ)("p",{css:ek,children:u.Season})]}):null,u.Episode?(0,p.BX)("div",{css:ew.childCss,children:[(0,p.tZ)(E,{children:(0,p.tZ)(b.Z,{id:"W8/Tzh",defaultMessage:[{type:0,value:"Episode"}]})}),(0,p.tZ)(S.q,{height:4}),(0,p.tZ)("p",{css:ek,children:u.Episode})]}):null]}),(0,p.tZ)(S.q,{height:16}),(0,p.BX)("ul",{css:eC.parentCss,children:[i.showShare?(0,p.tZ)(eP,{href:d,title:o.formatMessage({id:"vcjys0",defaultMessage:[{type:0,value:"View more info"}]}),styles:T,Icon:w.aU,children:(0,p.tZ)(b.Z,{id:"6vU/6A",defaultMessage:[{type:0,value:"More info"}]})}):null,i.showProgram&&i.showShare&&h?(0,p.tZ)(eP,{href:h,title:o.formatMessage({id:"RtFmPt",defaultMessage:[{type:0,value:"View more episodes"}]}),styles:T,Icon:w.Fz,children:(0,p.tZ)(b.Z,{id:"DBQTk9",defaultMessage:[{type:0,value:"More episodes"}]})}):null,i.showProgram&&m?(0,p.tZ)(eP,{href:m,title:o.formatMessage({id:"7BjVAW",defaultMessage:[{type:0,value:"View show website"}]}),styles:T,Icon:w.vc,children:(0,p.tZ)(b.Z,{id:"zKdTpz",defaultMessage:[{type:0,value:"Show website"}]})}):null,i.showProgram&&f?(0,p.tZ)(eP,{href:"https://facebook.com/".concat(f),title:o.formatMessage({id:"nTaRjo",defaultMessage:[{type:0,value:"View show Facebook page"}]}),styles:_.w6,Icon:w.zJ,children:(0,p.tZ)(b.Z,{id:"3gxFVZ",defaultMessage:[{type:0,value:"Facebook"}]})}):null,i.showProgram&&y?(0,p.tZ)(eP,{href:"https://twitter.com/".concat(y),title:o.formatMessage({id:"T+vJp9",defaultMessage:[{type:0,value:"View show Twitter feed"}]}),styles:_.fB,Icon:w.JD,children:(0,p.tZ)(b.Z,{id:"O2D6B3",defaultMessage:[{type:0,value:"Twitter"}]})}):null,i.showProgram&&g?(0,p.tZ)(eP,{href:g,title:Z,styles:_.f3,Icon:w.M6,children:k}):null]})]})}var eT={name:"1eg0rk6",styles:"width:18px;height:18px"};function eP(e){var t=e.href,n=e.title,r=e.styles,a=e.Icon,i=e.children;return(0,p.tZ)("li",{css:eC.childCss,children:(0,p.BX)("a",{href:t,title:n,target:"_blank",rel:"noreferrer",css:[d.PO,r,"",""],children:[(0,p.tZ)(a,{css:eT}),(0,p.tZ)(S.g,{width:4}),i]})})}var eA={name:"ty8c7z",styles:"margin-block-start:1em;margin-block-end:1em;margin-inline-start:0px;margin-inline-end:0px;padding-inline-start:40px"};function eO(e){var t=e.descriptionHtml,n=(0,eS.G)(t);return(0,p.tZ)("bdi",{css:[ek,d.kZ,{a:{color:"currentcolor"},p:{margin:"0 0 9.8px"},em:{fontStyle:"italic"},ol:[eA,{listStyleType:"decimal"}],ul:[eA,{listStyleType:"disc"}],blockquote:{fontStyle:" italic",margin:"0 0 0 0","& p":{borderLeft:"2px solid currentColor",padding:"0 0 0 0.5em"},'& p[dir="rtl"]':{borderLeft:"none",borderRight:"2px solid currentColor",padding:"0 0.5em 0 0"}},hr:{opacity:"0.3",margin:"2em 0"}},"",""],dangerouslySetInnerHTML:{__html:n}})}var eE={name:"8zonlz",styles:"font-size:14px;line-height:1.7;margin:0 0 9.8px"},eM={name:"1eg0rk6",styles:"width:18px;height:18px"},eI={name:"xmrttv",styles:"font-size:11.2px;line-height:1.7;margin-top:14px;opacity:0.5"};function ex(e){var t=e.error,n=e.onClose,a=(0,C.ql)().intl,o=r.useState(null),s=(0,i.Z)(o,2),l=s[0],u=s[1],c=m({rootRef:l,onClose:n}).closeOverlay;return(0,p.tZ)(f,{setRootRef:u,children:(0,p.BX)("div",{css:[d.v8,"display:flex;flex-direction:column;align-items:center;justify-content:center;overflow-x:hidden;overflow-y:auto;padding:15px;",""],children:[(0,p.tZ)("h1",{css:[Z.v.bold,"font-size:15.5px;line-height:25.575px;margin:0 0 9.8px;text-transform:uppercase;",""],children:(0,p.tZ)(b.Z,{id:"gqg6JZ",defaultMessage:[{type:0,value:"There was a problem playing the audio"}]})}),(0,p.tZ)("p",{css:eE,children:(0,p.tZ)(b.Z,{id:"reeitS",defaultMessage:[{type:0,value:"Check your internet connection, disable any ad blockers, and try again."}]})}),(0,p.tZ)("div",{children:(0,p.BX)(_._c,{type:"default",title:a.formatMessage({id:"+Dqi/T",defaultMessage:[{type:0,value:"Try again"}]}),onClick:c,children:[(0,p.tZ)(w.Pe,{css:eM}),(0,p.tZ)(S.g,{width:4}),(0,p.tZ)(b.Z,{id:"HqVO14",defaultMessage:[{type:0,value:"Try again"}]})]})}),void 0!==t.code?(0,p.tZ)("p",{css:eI,children:t.message?(0,p.tZ)(b.Z,{id:"HV7zOp",defaultMessage:[{type:1,value:"message"},{type:0,value:" (Error code "},{type:1,value:"code"},{type:0,value:")"}],values:{code:t.code,message:t.message}}):(0,p.tZ)(b.Z,{id:"LPN1SI",defaultMessage:[{type:0,value:"Error code "},{type:1,value:"code"}],values:{code:t.code}})}):null]})})}var eD=n(2809),eU=n(49715),ej=n.n(eU),eB=n(24825),eR=n(30083),eN=n(1097),eL=(0,d.nD)(18,14),ez={name:"1rycmec",styles:"font-size:14px;line-height:165%"};function eH(e){var t=e.currentPlayTime,n=e.onClose,r=(0,l.j)(),a=(0,C.ql)().intl,i=(0,s.Y)(),o=(0,eB.j)(i,t,r.inPlaylist),u=(0,_.ei)("default");return(0,p.BX)(A,{onClose:n,children:[(0,p.BX)(O,{children:[(0,p.tZ)(b.Z,{id:"yOelfI",defaultMessage:[{type:0,value:"Share"}]}),(0,p.tZ)(S.g,{width:18}),i.ShareUrl?null:(0,p.tZ)(eR.X,{css:ez,checked:o.addTimestamp,onChange:o.setAddTimestamp,children:(0,p.tZ)(b.Z,{id:"fPmR/e",defaultMessage:[{type:0,value:"Play from "},{type:1,value:"time"}],values:{time:(0,eb.R)(t)}})})]}),(0,p.tZ)(S.q,{height:16}),(0,p.BX)("ul",{css:eL.parentCss,children:[(0,p.tZ)(eW,{config:o.config.facebook,styles:_.w6,title:a.formatMessage({id:"Kbrx84",defaultMessage:[{type:0,value:"Share on Facebook"}]}),Icon:w.zJ,children:(0,p.tZ)(b.Z,{id:"JRdGvW",defaultMessage:[{type:0,value:"Facebook"}]})}),(0,p.tZ)(eW,{config:o.config.twitter,styles:_.fB,title:a.formatMessage({id:"TyRLwZ",defaultMessage:[{type:0,value:"Share on Twitter"}]}),Icon:w.JD,children:(0,p.tZ)(b.Z,{id:"2iiirI",defaultMessage:[{type:0,value:"Twitter"}]})}),(0,p.tZ)(eW,{config:o.config.email,styles:_.V,title:a.formatMessage({id:"24cf3G",defaultMessage:[{type:0,value:"Email link"}]}),Icon:w.Bd,children:(0,p.tZ)(b.Z,{id:"24cf3G",defaultMessage:[{type:0,value:"Email link"}]})}),(0,p.tZ)(eW,{config:o.config.whatsApp,styles:_.Sm,title:a.formatMessage({id:"qP9EVI",defaultMessage:[{type:0,value:"Share on WhatsApp"}]}),Icon:w.SC,children:(0,p.tZ)(b.Z,{id:"ZE7itt",defaultMessage:[{type:0,value:"WhatsApp"}]})}),r.showDownload?(0,p.tZ)(eW,{config:o.config.download,styles:u,title:a.formatMessage({id:"6DfCqJ",defaultMessage:[{type:0,value:"Download audio"}]}),Icon:w.Dj,children:(0,p.tZ)(b.Z,{id:"5D0NUn",defaultMessage:[{type:0,value:"Download"}]})}):null,(0,p.tZ)(eX,{title:a.formatMessage({id:"KqRtmH",defaultMessage:[{type:0,value:"Copy link"}]}),copyText:o.shareUrl,Icon:w.JH,children:(0,p.tZ)(b.Z,{id:"X/+GSq",defaultMessage:[{type:0,value:"Copy link"}]})}),(0,p.tZ)(eX,{title:a.formatMessage({id:"RfnX/1",defaultMessage:[{type:0,value:"Copy embed code"}]}),copyText:o.embedCode,Icon:w.g9,children:(0,p.tZ)(b.Z,{id:"fuWkBT",defaultMessage:[{type:0,value:"Copy embed"}]})})]})]})}var eV={name:"4djive",styles:"transition:opacity 0.2s"},eF={name:"qowjig",styles:"align-items:center;display:inline-flex"},eq={name:"5ob2ly",styles:"display:flex;position:relative"};function eX(e){var t=e.title,n=e.copyText,r=e.Icon,a=e.children,i=e.onClick,o=(0,eN.c)(),s=o.clipboardState,l=o.copyTextToClipboard,u=(0,_.ei)("default");return(0,p.tZ)("li",{css:eL.childCss,children:(0,p.BX)("button",{type:"button",title:t,disabled:"copying"===s,css:[u,eF,"",""],onClick:(0,eD.Z)(ej().mark(function e(){return ej().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null==i||i(),l(n);case 2:case"end":return e.stop()}},e)})),children:[(0,p.BX)("span",{css:eq,children:[(0,p.tZ)(r,{css:eV,style:{width:18,height:18,opacity:"success"===s?"0":"1"}}),(0,p.tZ)(w.NO,{css:[eV,"left:0;position:absolute;",""],style:{width:18,height:18,opacity:"success"===s?"1":"0"}})]}),(0,p.tZ)(S.g,{width:4}),a]})})}var eG={name:"1eg0rk6",styles:"width:18px;height:18px"};function eW(e){var t=e.config,n=e.styles,r=e.title,a=e.Icon,i=e.children;return(0,p.tZ)("li",{css:eL.childCss,children:(0,p.BX)("a",{href:t.href,title:r,target:"_blank",rel:"noreferrer",css:[d.PO,eF,n,"",""],onClick:t.onClick,children:[(0,p.tZ)(a,{css:eG}),(0,p.tZ)(S.g,{width:4}),i]})})}var eY=n(11214),eJ=n(63263),eK=function(e){var t=e.program,n=e.clipOverlay,r=(0,eY.n)(),i=n.overlayState;return(0,p.BX)(p.HY,{children:[(0,p.tZ)(a.Z,{component:null,children:"none"!==i.type?(0,p.tZ)(eJ.CO,{timeout:eJ.Is,children:function(){switch(i.type){case"follow":return(0,p.tZ)(eh,{directoryLinks:i.directoryLinks,program:t,onClose:n.closeOverlay});case"info":return(0,p.tZ)(eZ,{program:t,onClose:n.closeOverlay});case"share":return(0,p.tZ)(eH,{currentPlayTime:r.clipCurrentTime,onClose:n.closeOverlay})}}()}):null}),(0,p.tZ)(a.Z,{component:null,children:"error"===r.playerState.type?(0,p.tZ)(eJ.CO,{timeout:eJ.Is,children:(0,p.tZ)(ex,{error:r.playerState.error,onClose:function(){r.play()}})}):null}),(0,p.tZ)(eJ.CO,{in:"ad"===r.mode.type,timeout:600,children:(0,p.tZ)(v,{player:r})})]})}},19431:function(e,t,n){n.d(t,{a:function(){return a}});var r=n(35944);function a(e){var t=e.color,n=e.size,a=void 0===n?"1em":n,i=e.children,o=e.opacity,s=e.verticalAlign;return(0,r.tZ)("span",{css:[{color:t,"& svg":{verticalAlign:void 0===s?"middle":s,width:a,height:a,opacity:o}},"",""],children:i})}},62725:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(70917),a=n(27029),i=n(35944);function o(e){var t=e.clip;return(0,i.tZ)("div",{css:(0,r.iv)({backgroundImage:"url(".concat((0,a.Hn)(t.ImageUrl,"thumbnail"),")"),backgroundPosition:"50% 50%",backgroundSize:"cover",bottom:"-20px",filter:"blur(20px)",left:"-20px",position:"absolute",right:"-20px",top:"-20px"},"","")})}},66747:function(e,t,n){n.d(t,{SR:function(){return v},Uw:function(){return b},VR:function(){return S},i1:function(){return g},tI:function(){return _},uO:function(){return C}});var r=n(70917),a=n(1163),i=n(67294),o=n(44012),s=n(36034),l=n(19431),u=n(98652),c=n(64127),d=n(48152),p=n(48622),f=n(53102),h=n(1825),y=n(41818),m=n(35944);function v(e){var t=e.children;return(0,m.tZ)(u.T,{children:(0,m.tZ)("div",{css:[h.v8,{background:f.O.grey1,color:f.O.grey3,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},"",""],children:t})})}function g(){return(0,m.tZ)(b,{children:(0,m.tZ)(p.Uc,{})})}function b(e){var t=e.children;return(0,m.tZ)(l.a,{size:28,opacity:.5,children:t})}function _(e){var t=e.children;return(0,m.tZ)("p",{css:[y.v.semibold,"font-size:14px;line-height:1.7;",""],children:t})}function S(){var e=i.useState(!1),t=(0,a.Z)(e,2),n=t[0],r=t[1];return(0,m.tZ)(C,{showSpinner:n,onClick:function(){window.location.reload(),r(!0)}})}var k={name:"1mjg5st",styles:"margin-top:8px;position:relative"},w={name:"1eg0rk6",styles:"width:18px;height:18px"};function C(e){var t=e.showSpinner,n=e.onClick;return(0,m.BX)("div",{css:k,children:[(0,m.tZ)("div",{css:(0,r.iv)({visibility:t?"hidden":void 0},"",""),children:(0,m.BX)("button",{type:"button",css:[h.d$,s.D6,"",""],disabled:t,onClick:n,children:[(0,m.tZ)(p.Pe,{css:w}),(0,m.tZ)(c.g,{width:4}),(0,m.tZ)(o.Z,{id:"B/n8XI",defaultMessage:[{type:0,value:"Try again"}]})]})}),t?(0,m.tZ)("div",{css:[h.v8,h.wm,"",""],children:(0,m.tZ)(d.$,{})}):null]})}},92694:function(e,t,n){n.d(t,{v:function(){return Z}});var r=n(70917),a=n(58800),i=n.n(a),o=n(67294),s=n(47464),l=n.n(s),u=n(35944);function c(e){var t=e.config;return t.customGATrackingId?(0,u.BX)(u.HY,{children:[(0,u.tZ)(l(),{src:"https://www.googletagmanager.com/gtag/js?id=".concat(t.customGATrackingId),strategy:"afterInteractive"}),(0,u.tZ)(l(),{id:"google-analytics",strategy:"afterInteractive",children:d})]}):null}var d="\n    window.dataLayer = window.dataLayer || [];\n    function gtag(){dataLayer.push(arguments);}\n    gtag('js', new Date());\n",p=n(34627),f=n(51674),h=n(91403),y=n(44012),m=n(66747);function v(e){var t=e.children;return(0,u.tZ)(h.SV,{fallback:g,children:t})}function g(e){var t=e.resetError;return(0,u.BX)(m.SR,{children:[(0,u.tZ)(m.i1,{}),(0,u.tZ)(m.tI,{children:(0,u.tZ)(y.Z,{id:"hze1Yr",defaultMessage:[{type:0,value:"An error occurred"}]})}),(0,u.tZ)(m.uO,{onClick:t})]})}var b=n(98652),_=n(96602),S=n(88259),k=function(e){window.parent.postMessage(JSON.stringify({src:window.location.toString(),context:"iframe.resize",height:e}),"*")},w=function(e){o.useEffect(function(){var t=(0,S.M)();if("browser"===t.type&&"embedly"===t.parent&&"Wide"===e.embedSize){var n=e.showTranscript?_.TT.wideClipTranscriptDefault:_.TT.wideClipDefault,r=function(){k(n)};return r(),window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}}},[e.embedSize,e.showTranscript])},C=n(11214);function Z(e){var t=e.clip,n=e.config,a=e.grow,o=e.metadata,s=e.player,l=e.children;return w(n),(0,u.BX)(v,{children:[(0,u.tZ)(i(),{children:(0,u.tZ)("title",{children:o.title})}),(0,u.BX)(f.l,{config:n,children:[(0,u.tZ)(c,{config:n}),(0,u.tZ)(p.i,{clip:t,children:(0,u.tZ)(C.I,{player:s,children:(0,u.tZ)(b.T,{children:(0,u.tZ)("div",{css:(0,r.iv)({position:"absolute",height:a||"Square"===n.embedSize?"100%":void 0,width:"100%",display:"flex",flexDirection:"column"},"",""),style:{backgroundColor:n.colorBackground},children:l})})})})]})]})}},96823:function(e,t,n){n.d(t,{N:function(){return l}});var r=n(1163),a=n(48189),i=n(98563),o=n(76292),s={accessToken:c,autoplay:u,background:c,description:u,download:u,follow:u,foreground:c,ga:p(function(e){return e}),highlight:c,image:u,in_playlist:d(i.y),lightPlay:u,limit:p(function(e){return e.toString()}),list:u,referrer:p(function(e){return e}),playlistimages:u,playlistshare:u,program:u,selectedClip:p(function(e){return e}),share:u,size:c,source:c,style:c,subscribe:u,t:d(a.W6),transcript:u,utm_source:c,lang:c};function l(e,t){for(var n=(0,o.q6)(e),a=0,i=Object.entries(t);a<i.length;a++){var l=(0,r.Z)(i[a],2),u=l[0],c=l[1],d=s[u];if(d){var p=d(c);void 0!==p&&n.searchParams.append(u,p)}}return n.toString()}function u(e){if(void 0!==e)return e?"1":"0"}function c(e){return e}function d(e){return function(t){return void 0!==t?e(t):void 0}}function p(e){return function(t){if(t&&t.ok)return e(t.payload)}}},88259:function(e,t,n){n.d(t,{M:function(){return r}});var r=function(){if("undefined"==typeof document)return{type:"node"};var e,t,n=document.referrer.includes("embedly.com")?"embedly":document.referrer.includes("omny.fm")?"omnyfm":"other";return{type:"browser",url:document.URL,parent:n,referrer:"embedly"===n?(e=document,null!==(t=new URL(e.URL).searchParams.get("referrer"))&&void 0!==t?t:e.referrer):document.referrer}}},98563:function(e,t,n){n.d(t,{y:function(){return r}});function r(e){switch(e.type){case"playlistInCrossProgram":return e.playlistProgramSlug+"!"+e.playlistSlug;case"playlistInSameProgram":return e.playlistSlug}}},66406:function(e,t,n){n.d(t,{T:function(){return s}});var r=n(2809),a=n(49715),i=n.n(a),o=n(86264);function s(e,t){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(i().mark(function e(t,n){var r,a;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,o.K5)("omnyApiBaseUrl")+t,e.prev=2,e.next=5,fetch(r,n);case 5:a=e.sent,e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),console.error("Failed to fetch",r),e.t0;case 12:return e.abrupt("return",a);case 14:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}},76292:function(e,t,n){function r(e){var t=e.includes("://")?"":"http://example.com",n=new URL(t+e);return{searchParams:n.searchParams,toString:function(){return n.toString().substring(t.length)}}}function a(e,t){var n=r(e);return t.forEach(function(e,t){n.searchParams.set(t,e)}),n.toString()}n.d(t,{YO:function(){return a},q6:function(){return r}})},47366:function(e,t,n){n.d(t,{R1:function(){return o},UU:function(){return l},hV:function(){return s},p6:function(){return i},z:function(){return a}});var r=n(98563);function a(e){var t=e.program;return"/shows/".concat(t.Slug)}function i(e){var t=e.playlistsProgram;return"/shows/".concat(t.Slug,"/playlists")}function o(e){var t=e.playlistProgram,n=e.playlist;return"/shows/".concat(t.Slug,"/playlists/").concat(n.Slug)}function s(e){var t=e.clipProgram,n=e.clip,a=e.inPlaylist,i="/shows/".concat(t.Slug,"/").concat(n.Slug);return a&&(a.programSlug!==t.Slug?i+="?in_playlist="+(0,r.y)({type:"playlistInCrossProgram",playlistProgramSlug:a.programSlug,playlistSlug:a.slug}):i+="?in_playlist="+(0,r.y)({type:"playlistInSameProgram",playlistSlug:a.slug})),i}function l(e){var t=e.clip,n=e.program,r=e.baseUrl,a=e.format,i=r+"/shows/".concat(n.Slug,"/").concat(t.Slug),o=new URL(r+"/oembed");return o.searchParams.set("url",i),o.searchParams.set("format",a),o.toString()}},1097:function(e,t,n){n.d(t,{c:function(){return d}});var r=n(2809),a=n(1163),i=n(49715),o=n.n(i),s=n(67294),l=n(70890);function u(){return(u=(0,r.Z)(o().mark(function e(t){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!navigator.clipboard){e.next=12;break}return e.prev=2,e.next=5,navigator.clipboard.writeText(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),c(t);case 10:e.next=17;break;case 12:if(!window.clipboardData){e.next=16;break}return e.abrupt("return",window.clipboardData.setData("Text",t));case 16:c(t);case 17:e.next=23;break;case 19:return e.prev=19,e.t1=e.catch(0),(0,l.H)("copyToClipboard exception: "+e.t1),e.abrupt("return",!1);case 23:return e.abrupt("return",!0);case 24:case"end":return e.stop()}},e,null,[[0,19],[2,7]])}))).apply(this,arguments)}function c(e){var t=document.createElement("span");t.textContent=e,t.style.whiteSpace="pre",t.style.webkitUserSelect="auto",t.style.userSelect="all",document.body.appendChild(t);var n=window.getSelection();if(!n)throw Error("window.getSelection() returned null");var r=window.document.createRange();n.removeAllRanges(),r.selectNode(t),n.addRange(r);try{window.document.execCommand("copy")}catch(e){throw e}finally{n.removeAllRanges(),window.document.body.removeChild(t)}}function d(){var e,t=s.useState("idle"),n=(0,a.Z)(t,2),i=n[0],l=n[1],c=s.useRef(-1);return s.useEffect(function(){return function(){window.clearTimeout(c.current)}},[]),{clipboardState:i,copyTextToClipboard:s.useCallback((e=(0,r.Z)(o().mark(function e(t){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.clearTimeout(c.current),l("copying"),e.next=4,function(e){return u.apply(this,arguments)}(t);case 4:if(e.sent){e.next=8;break}return l("idle"),e.abrupt("return");case 8:l("success"),c.current=window.setTimeout(function(){l("idle")},3e3);case 10:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),[])}}},38601:function(e,t,n){n.d(t,{G:function(){return i}});var r=n(1163),a=n(67294);function i(e){var t=a.useState(null),n=(0,r.Z)(t,2),i=n[0],o=n[1];return a.useEffect(function(){o(document.createElement("div"))},[]),a.useMemo(function(){if(!i)return e;i.innerHTML=e;for(var t=i.querySelectorAll("a"),n=0;n<t.length;n++)t[n].rel="nofollow",t[n].target="_blank";return i.innerHTML},[i,e])}},59546:function(e,t,n){n.d(t,{U:function(){return o}});var r=n(1163),a=n(67294),i={type:"none"},o=function(){var e=a.useState(i),t=(0,r.Z)(e,2),n=t[0],o=t[1];return{overlayState:n,setOverlay:function(e){o(e)},closeOverlay:function(){o(i)}}}},27353:function(e,t,n){n.d(t,{Y:function(){return D}});var r=n(1163),a=n(2809),i=n(3385),o=n(48039),s=n(58823),l=n(49715),u=n.n(l),c=n(16065),d=n(79447),p=n(86707),f=n(32914);function h(){}var y=n(66406),m=n(59080),v=n(40839);function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var _={currentTime:0,duration:null,isBuffering:!1,isPlaying:!1},S=function(){function e(){(0,i.Z)(this,e),(0,s.Z)(this,"_allMedia",void 0),(0,s.Z)(this,"_mediaByMediaType",void 0),(0,s.Z)(this,"_state",{type:"none"}),(0,s.Z)(this,"_videoElement",void 0),(0,s.Z)(this,"_onAdComplete",(0,v._)()),(0,s.Z)(this,"_onAdRejected",(0,v._)()),(0,s.Z)(this,"_onMediaStateChange",(0,v._)()),(0,s.Z)(this,"_onPause",(0,v._)()),(0,s.Z)(this,"_onPlay",(0,v._)());var t="undefined"!=typeof document?document.createElement("audio"):null,n="undefined"!=typeof document?document.createElement("video"):null;n&&(n.playsInline=!0),this._mediaByMediaType={audio:t?new m.P3(t):new m.Wk,video:n?new m.P3(n):new m.Wk},this._allMedia=Object.values(this._mediaByMediaType),this._addMediaObservables("audio",this._mediaByMediaType.audio),this._addMediaObservables("video",this._mediaByMediaType.video),this._videoElement=n}return(0,o.Z)(e,[{key:"muted",get:function(){var e=this._getState();return this._mediaByMediaType[e.type].muted},set:function(e){var t,n=g(this._allMedia);try{for(n.s();!(t=n.n()).done;)t.value.muted=e}catch(e){n.e(e)}finally{n.f()}}},{key:"mediaState",get:function(){var e=this._state;switch(e.type){case"none":return _;case"audio":case"video":return e.mediaState}}},{key:"videoElement",get:function(){return this._videoElement}},{key:"volume",get:function(){var e=this._getState();return this._mediaByMediaType[e.type].volume},set:function(e){var t,n=g(this._allMedia);try{for(n.s();!(t=n.n()).done;)t.value.volume=e}catch(e){n.e(e)}finally{n.f()}}},{key:"adChange",value:function(e){var t,n=e.adData,r=e.adProviderType,a=e.clip,i=this._mediaByMediaType[n.media.type],o=new c.VASTTracker(null,n.ad,n.creative,null===(t=n.media.companion)||void 0===t?void 0:t.creative);this._state={type:n.media.type,hasTrackedImpression:!1,mediaState:_,tracker:o,trackImpression:function(){var e,t,i,o,s,l,u;o=(e={adData:n,adProviderType:r,clip:a}).adData,s=e.adProviderType,l=e.clip,u=function(){var e,t;switch(s){case"Triton":return null===(e=l.Program.AdConfig)||void 0===e?void 0:e.ConfigTriton;case"Vast":return null===(t=l.Program.AdConfig)||void 0===t?void 0:t.ConfigVast}}(),(0,f.Q3)({AdAudioUrl:o.nonNullableData.mediaFile.fileURL,AdClickThroughUrl:null!==(t=null===(i=o.creative.videoClickThroughURLTemplate)||void 0===i?void 0:i.url)&&void 0!==t?t:"",AdId:o.nonNullableData.ad.id,AdProviderConfiguration:JSON.stringify(u),AdProviderType:s,AdTitle:o.nonNullableData.ad.title,ClipId:l.Id,OrganizationId:l.OrganizationId})(y.T)}},o.on("clickthrough",function(e){var t=window.open(e,"_blank");t&&(t.opener=null)}),o.trackImpression(),i.setSrc(n.nonNullableData.mediaFile.fileURL,"Advertisement"),i.play(-1)}},{key:"adClick",value:function(){this._getState().tracker.click()}},{key:"adSkip",value:function(){var e=this._getState();e.tracker.skip(),this._mediaByMediaType[e.type].pause(),this._adComplete(e.type)}},{key:"userInteraction",value:function(){var e,t=g(this._allMedia);try{for(t.s();!(e=t.n()).done;)e.value.userInteraction()}catch(e){t.e(e)}finally{t.f()}}},{key:"pause",value:function(){var e=this._getState();this._mediaByMediaType[e.type].pause()}},{key:"play",value:function(){var e=this._getState();this._mediaByMediaType[e.type].play(-1)}},{key:"onAdComplete",get:function(){return this._onAdComplete.observe}},{key:"onAdRejected",get:function(){return this._onAdRejected.observe}},{key:"onMediaStateChange",get:function(){return this._onMediaStateChange.observe}},{key:"onPause",get:function(){return this._onPause.observe}},{key:"onPlay",get:function(){return this._onPlay.observe}},{key:"_addMediaObservables",value:function(e,t){var n=this;t.onAction(function(t){var r=n._state;if(r.type===e)switch(t.type){case"ended":r.tracker.complete(),n._adComplete(r.type);break;case"error":r.tracker.errorWithCode("405"),n._mediaByMediaType[r.type].pause(),n._adComplete(r.type);break;case"loadedMetadata":r.mediaState=(0,p.updateObject)(r.mediaState,{duration:t.duration}),n._onMediaStateChange.dispatch();break;case"pause":r.tracker.setPaused(!0),r.mediaState=(0,p.updateObject)(r.mediaState,{isPlaying:!1}),n._onMediaStateChange.dispatch(),n._onPause.dispatch();break;case"play":r.tracker.setPaused(!1),r.hasTrackedImpression||(r.hasTrackedImpression=!0,r.trackImpression()),r.mediaState=(0,p.updateObject)(r.mediaState,{isPlaying:!0}),n._onMediaStateChange.dispatch(),n._onPlay.dispatch();break;case"playPromiseRejected":n._onAdRejected.dispatch();break;case"timeUpdate":r.tracker.setProgress(t.currentTime),r.mediaState=(0,p.updateObject)(r.mediaState,{currentTime:t.currentTime}),n._onMediaStateChange.dispatch()}}),t.onBufferingChange(function(t){var r=n._state;r.type===e&&(r.mediaState=(0,p.updateObject)(r.mediaState,{isBuffering:t}),n._onMediaStateChange.dispatch())})}},{key:"_adComplete",value:function(e){if("video"===e){var t,n,r;document.exitFullscreen?document.exitFullscreen().catch(h):document.webkitExitFullscreen?null===(t=document.webkitExitFullscreen())||void 0===t||t.catch(h):document.mozCancelFullScreen?null===(n=document.mozCancelFullScreen())||void 0===n||n.catch(h):document.msExitFullscreen&&(null===(r=document.msExitFullscreen())||void 0===r||r.catch(h))}this._onAdComplete.dispatch()}},{key:"_getState",value:function(e){var t=this._state;switch(t.type){case"none":throw this._videoElement&&console.log("videoElement has parent?",!!this._videoElement.parentElement),Error("attempted to get AdPlayer state while none");case"audio":case"video":if(e&&e!==t.type)throw Error("attempted to get AdPlayer ".concat(e," state when ").concat(t.type));return t}}}]),e}();function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var C=n(93860);function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){var n,r=[],a=[],i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;t(o)?r.push(o):a.push(o)}}catch(e){i.e(e)}finally{i.f()}return[r,a]}var P=n(55639);function A(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t,n){return"duringPlayback"===e.type&&e.offsetSeconds>=t&&e.offsetSeconds<=n}function M(e){switch(e.mode.type){case"ad":if(0===e.mode.remainingAds.length){var t=e.mode.adTrigger;return[(0,p.updateObject)(e,{mode:{type:"clip"}}),[function(){switch(t){case"autoplay":return{type:"playerAutoplay"};case"ended":return{type:"onClipEnded"};case"playback":return{type:"playerPlay"}}}()]]}var n=e.mode.remainingAds[0],r=e.mode.remainingAds.slice(1),a=e.adCache.get(n.id);return[(0,p.updateObject)(e,{mode:(0,p.updateObject)(e.mode,{ad:n,adCacheState:null!=a?a:{type:"loading"},remainingAds:r})}),void 0===a?[{type:"loadAd",ad:n}]:"loaded"===a.type?[{type:"adChange",ad:n,adData:a.adData}]:[]];case"clip":throw Error("adComplete in clip mode")}}function I(e,t){var n,r=[],a=t+2,i=A(e.allAds);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(!e.adCache.has(o.id)){var s=void 0;switch(o.type){case"firstPlay":s=!0;break;case"duringPlayback":case"end":s=o.offsetSeconds>=t&&o.offsetSeconds<=a}s&&(e.adCache.set(o.id,{type:"loading"}),r.push({type:"loadAd",ad:o}))}}}catch(e){i.e(e)}finally{i.f()}return r}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var D=function(){var e;function t(e){var n=this,r=e.embedConfig,a=e.player,o=e.initialClip,l=e.firstClipStartTimeSeconds,u=e.playlistId,c=e.referrer;(0,i.Z)(this,t),(0,s.Z)(this,"_adPlayer",new S),(0,s.Z)(this,"_currentClip",void 0),(0,s.Z)(this,"_mountState",{type:"unmounted",autoplayRequested:!1}),(0,s.Z)(this,"_player",void 0),(0,s.Z)(this,"_state",{adCache:new Map,allAds:[],unshownAds:[],mode:{type:"clip"},sessionId:0}),(0,s.Z)(this,"_vastAdProviderEmbedData",void 0),(0,s.Z)(this,"_adMediaStateChangeObservable",(0,v._)()),(0,s.Z)(this,"_bufferingChangeObservable",(0,v._)()),(0,s.Z)(this,"_clipChangeObservable",(0,v._)()),(0,s.Z)(this,"_clipEndObservable",(0,v._)()),(0,s.Z)(this,"_clipTimeUpdateObservable",(0,v._)()),(0,s.Z)(this,"_errorObservable",(0,v._)()),(0,s.Z)(this,"_modeChangeObservable",(0,v._)()),(0,s.Z)(this,"_pauseObservable",(0,v._)()),(0,s.Z)(this,"_playerStateChangeObservable",(0,v._)()),(0,s.Z)(this,"_playObservable",(0,v._)()),(0,s.Z)(this,"_seekBackwardObservable",(0,v._)()),(0,s.Z)(this,"_seekForwardObservable",(0,v._)()),this._player=a,this._vastAdProviderEmbedData={embedConfig:r,playlistId:u,referrer:c},this._currentClip=o,l&&l<o.DurationSeconds&&this._player.seek(l);var d=this._adPlayer;d.onAdComplete(function(){n._dispatch({type:"adComplete"})}),d.onAdRejected(function(){n._dispatch({type:"adRejected"})}),d.onMediaStateChange(function(){n._adMediaStateChangeObservable.dispatch()}),d.onPause(function(){n._pauseObservable.dispatch()}),d.onPlay(function(){n._playObservable.dispatch()}),a.onBufferingChange(function(){n._bufferingChangeObservable.dispatch()}),a.onClipEnd(function(){n._dispatch({type:"clipEnded"})}),a.onError(function(e){n._errorObservable.dispatch(e)}),a.onPause(function(){n._pauseObservable.dispatch()}),a.onPlay(function(){n._playObservable.dispatch()}),a.onPlayerStateChange(function(){n._playerStateChangeObservable.dispatch()}),a.onTimeUpdate(function(){n._clipTimeUpdateObservable.dispatch(),n._dispatch({type:"clipTimeUpdate",time:a.currentTime,isPlaying:"playing"===a.state.type})})}return(0,o.Z)(t,[{key:"adMediaState",get:function(){return this._adPlayer.mediaState}},{key:"adVideoElement",get:function(){return this._adPlayer.videoElement}},{key:"buffering",get:function(){return this._player.buffering}},{key:"clip",get:function(){return this._currentClip}},{key:"clipCurrentTime",get:function(){return this._player.currentTime}},{key:"clipDuration",get:function(){return this._player.duration}},{key:"isPlaying",get:function(){var e=this._adPlayer,t=this._state.mode,n=this._player;switch(t.type){case"ad":return e.mediaState.isPlaying;case"clip":return"playing"===n.state.type}}},{key:"mode",get:function(){return this._state.mode}},{key:"muted",get:function(){switch(this._state.mode.type){case"ad":return this._adPlayer.muted;case"clip":return this._player.muted}}},{key:"playerState",get:function(){return this._player.state}},{key:"program",get:function(){return this.clip.Program}},{key:"volume",get:function(){switch(this._state.mode.type){case"ad":return this._adPlayer.volume;case"clip":return this._player.volume}}},{key:"adClick",value:function(){this._adPlayer.adClick()}},{key:"adSkip",value:function(){this._adPlayer.adSkip()}},{key:"autoplay",value:function(){"mounted"===this._mountState.type?this._dispatch({type:"play",fromTime:this._player.currentTime,trigger:"autoplay"}):this._mountState.autoplayRequested=!0}},{key:"mount",value:(e=(0,a.Z)(u().mark(function e(){var t;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("unmounted"!==this._mountState.type)){e.next=2;break}return e.abrupt("return");case 2:if(this._mountState.type="mounting",this._adPlayer.videoElement){e.next=5;break}throw Error("attempting to mount without video element");case 5:return e.next=7,function(e){return U.apply(this,arguments)}(this._adPlayer.videoElement);case 7:t=this._mountState.autoplayRequested,this._mountState={type:"mounted"},this._player._internalOnly_mount(),this._dispatchSetClip(),t&&this._dispatch({type:"play",fromTime:this._player.currentTime,trigger:"autoplay"});case 12:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"pause",value:function(){var e=this._adPlayer,t=this._state.mode,n=this._player;switch(t.type){case"ad":e.pause();break;case"clip":n.pause()}}},{key:"play",value:function(){var e=this._adPlayer,t=this._player;e.userInteraction(),t.userInteraction(),this._dispatch({type:"play",fromTime:t.currentTime,trigger:"playback"})}},{key:"seek",value:function(e){var t=this._state.mode,n=this._player;switch(t.type){case"ad":return{ok:!1,message:"An ad is currently playing"};case"clip":return n.seek(e),{ok:!0}}}},{key:"seekBackward",value:function(e){var t=this.seek(this._player.currentTime-e);return this._seekBackwardObservable.dispatch(e),t}},{key:"seekForward",value:function(e){var t=Math.min(Math.max(0,this.clipDuration-1),this._player.currentTime+e),n=this.seek(t);return this._seekForwardObservable.dispatch(e),n}},{key:"setMuted",value:function(e){this._adPlayer.muted=e,this._player.muted=e}},{key:"setVolume",value:function(e){this._adPlayer.volume=e,this._player.volume=e}},{key:"togglePlayback",value:function(){this.isPlaying?this.pause():this.play()}},{key:"onAdMediaStateChange",get:function(){return this._adMediaStateChangeObservable.observe}},{key:"onBufferingChange",get:function(){return this._bufferingChangeObservable.observe}},{key:"onClipChange",get:function(){return this._clipChangeObservable.observe}},{key:"onClipEnd",get:function(){return this._clipEndObservable.observe}},{key:"onClipTimeUpdate",get:function(){return this._clipTimeUpdateObservable.observe}},{key:"onError",get:function(){return this._errorObservable.observe}},{key:"onModeChange",get:function(){return this._modeChangeObservable.observe}},{key:"onPause",get:function(){return this._pauseObservable.observe}},{key:"onPlay",get:function(){return this._playObservable.observe}},{key:"onPlayerStateChange",get:function(){return this._playerStateChangeObservable.observe}},{key:"onSeekBackward",get:function(){return this._seekBackwardObservable.observe}},{key:"onSeekForward",get:function(){return this._seekForwardObservable.observe}},{key:"_changeClip",value:function(e){this._currentClip=e,"mounted"===this._mountState.type&&this._dispatchSetClip(),this._clipChangeObservable.dispatch()}},{key:"_onClipEnded",value:function(){this._clipEndObservable.dispatch()}},{key:"_dispatchSetClip",value:function(){var e,t,n,a,i=this._currentClip;(e=null===(n=i.Program.AdConfig)||void 0===n?void 0:n.ConfigTriton)&&e.OnDemandUrl&&e.StationId&&(e.OnDemandUrl,e.StationId);var o=(t=null===(a=i.Program.AdConfig)||void 0===a?void 0:a.ConfigVast)&&t.VastUrl?{vastUrl:t.VastUrl}:null,s=this._getVideoPlayerDimensions(),l=function(e){var t,n=e.adConfiguration,a=e.clip,i=e.embedData,o=e.videoPlayerDimensions;if(!n)return null;var s=new Date().getTime().toString();return function(e,t){if(0===t.length)return e;var n,a="cust_params",i=[],o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}(t);try{for(o.s();!(n=o.n()).done;){var s=(0,r.Z)(n.value,2),l=s[0],u=s[1];if(u){var c=u.replace(/['"=!+#;^()<>[\]]+/g,"");c&&i.push("".concat(l,"=").concat(c))}}}catch(e){o.e(e)}finally{o.f()}if(0===i.length)return e;var d=new URL(e),p=i.join("&"),f=d.searchParams.get(a);return f&&(p="".concat(f,"&").concat(p)),d.searchParams.set(a,p),d.toString()}(function(e,t){var n,a=e,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}(t);try{for(i.s();!(n=i.n()).done;){var o=(0,r.Z)(n.value,2),s=o[0],l=o[1];if(null!==l){var u="["+s+"]",c="%%"+s+"%%",d=encodeURIComponent(l);a=(a=a.replace(u,d)).replace(c,d)}}}catch(e){i.e(e)}finally{i.f()}return a}(n.vastUrl,[["correlator",s],["description_url",null!==(t=a.ShareUrl)&&void 0!==t?t:a.PublishedUrl],["height",o.height.toString()],["output","xml_vast3"],["referrer_url",i.referrer],["timestamp",s],["url",i.referrer],["width",o.width.toString()]]),[["omny_clip_id",a.Id],["omny_clip_title",a.Title],["omny_embed_size",i.embedConfig.embedSize],["omny_embed_style",i.embedConfig.embedStyle],["omny_network_id",a.Program.NetworkId],["omny_organization_id",a.OrganizationId],["omny_playlist_id",i.playlistId],["omny_program_name",a.Program.Name],["omny_program_slug",a.Program.Slug],["omny_type","podcast"]])}({adConfiguration:o,clip:i,embedData:this._vastAdProviderEmbedData,videoPlayerDimensions:s}),u=function(e){var t=e.clip,n=e.getTritonAdProviderVastUrl,r=e.vastAdProviderVastUrl,a=[],i=0;if(t.HasPreRollVideoAd&&r&&a.push({id:i++,adProviderType:"Vast",type:"firstPlay",offsetSeconds:0,vastAdUrl:r}),t.AdMarkers&&t.AdMarkers.length>0&&n){var o,s=A(t.AdMarkers);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(0!==l.MaxNumberOfAds)for(var u=(0,P.e)(l.Offset),c=(0,P.F)(u),d=function(e,t,n){switch(e){case"PreRoll":return"firstPlay";case"MidRoll":return"duringPlayback";case"PostRoll":if(t<n-2)return"duringPlayback";return"end"}}(l.AdMarkerType,c,t.DurationSeconds),p=0;p<l.MaxNumberOfAds;p++)a.push({id:i++,adProviderType:"Triton",type:d,offsetSeconds:c,vastAdUrl:n(l.AdMarkerType)})}}catch(e){s.e(e)}finally{s.f()}}return a}({clip:i,getTritonAdProviderVastUrl:null,vastAdProviderVastUrl:l});this._dispatch({type:"setClip",ads:u})}},{key:"_dispatch",value:function(e){var t=this,n=function(e,t){switch(t.type){case"adComplete":return M(e);case"adDataLoadFailed":if(t.sessionId!==e.sessionId)return e;switch(e.adCache.set(t.adId,{type:"error"}),e.mode.type){case"ad":var n,a=(0,p.updateObject)(e,{unshownAds:e.unshownAds.filter(function(e){return e.id!==t.adId}),mode:(0,p.updateObject)(e.mode,{remainingAds:e.mode.remainingAds.filter(function(e){return e.id!==t.adId})})});if(e.mode.ad.id!==t.adId)return a;return M(a);case"clip":return(0,p.updateObject)(e,{unshownAds:e.unshownAds.filter(function(e){return e.id!==t.adId})})}break;case"adDataLoaded":if(t.sessionId!==e.sessionId)return e;var i={type:"loaded",adData:t.ad};switch(e.adCache.set(t.adId,i),e.mode.type){case"ad":if(e.mode.ad.id===t.adId)return[(0,p.updateObject)(e,{mode:(0,p.updateObject)(e.mode,{adCacheState:i})}),[{type:"adChange",ad:e.mode.ad,adData:i.adData}]];return e;case"clip":return e}break;case"adRejected":switch(e.mode.type){case"ad":return(0,p.updateObject)(e,{unshownAds:((n=[e.mode.ad].concat((0,C.Z)(e.mode.remainingAds),(0,C.Z)(e.unshownAds))).sort(function(e,t){return e.id-t.id}),n),mode:{type:"clip"}});case"clip":return e}break;case"clipEnded":switch(e.mode.type){case"ad":throw Error("clipEnded in ad mode");case"clip":var o=T(e.unshownAds,function(e){return"end"===e.type}),s=(0,r.Z)(o,2),l=s[0],u=s[1];if(0===l.length)return[e,[{type:"onClipEnded"}]];var c=l[0],d=l.slice(1),f=e.adCache.get(c.id);return[(0,p.updateObject)(e,{unshownAds:u,mode:{type:"ad",ad:c,adCacheState:null!=f?f:{type:"loading"},remainingAds:d,adTrigger:"ended"}}),void 0===f?[{type:"loadAd",ad:c}]:[]]}break;case"clipTimeUpdate":switch(e.mode.type){case"ad":return e;case"clip":var h=I(e,t.time);if(!t.isPlaying)return[e,h];var y=t.time-.25,m=y+1,v=T(e.unshownAds,function(e){return E(e,y,m)}),g=(0,r.Z)(v,2),b=g[0],_=g[1];if(0===b.length)return[e,h];var S=b[0],k=b.slice(1),w=e.adCache.get(S.id);return void 0===w?h.push({type:"loadAd",ad:S}):"loaded"===w.type&&h.push({type:"adChange",ad:S,adData:w.adData}),[(0,p.updateObject)(e,{unshownAds:_,mode:{type:"ad",ad:S,adCacheState:null!=w?w:{type:"loading"},remainingAds:k,adTrigger:"playback"}}),[{type:"playerPause"}].concat((0,C.Z)(h))]}break;case"play":switch(e.mode.type){case"ad":return[e,[{type:"adPlay"}]];case"clip":var Z=t.fromTime-.25,P=t.fromTime+2,A=T(e.unshownAds,function(e){return"firstPlay"===e.type||E(e,Z,P)}),O=(0,r.Z)(A,2),x=O[0],D=O[1];if(0===x.length)return[e,[{type:"playerPlay"}]];var U=x[0],j=x.slice(1),B=e.adCache.get(U.id);return[(0,p.updateObject)(e,{unshownAds:D,mode:{type:"ad",ad:U,adCacheState:null!=B?B:{type:"loading"},remainingAds:j,adTrigger:t.trigger}}),void 0===B?[{type:"loadAd",ad:U}]:"loaded"===B.type?[{type:"adChange",ad:U,adData:B.adData}]:[]]}break;case"preload":var R=I(e,t.fromTime);return[e,R];case"setClip":return{adCache:new Map,allAds:t.ads,unshownAds:t.ads,mode:{type:"clip"},sessionId:e.sessionId+1}}}(this._state,e),a=Array.isArray(n)?n:[n,[]],i=(0,r.Z)(a,2),o=i[0],s=i[1];this._state=o,this._modeChangeObservable.dispatch();var l,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}(s);try{for(u.s();!(l=u.n()).done;)!function(){var e=l.value;switch(e.type){case"adChange":t._adPlayer.adChange({adData:e.adData,adProviderType:e.ad.adProviderType,clip:t.clip});break;case"adPlay":t._adPlayer.play();break;case"onClipEnded":t._onClipEnded();break;case"loadAd":var n=o.sessionId,r=t._getVideoPlayerDimensions();new c.VASTClient().get(e.ad.vastAdUrl,{withCredentials:!0}).then(function(a){var i=(0,d.R)(a.ads,r);if(!i){t._dispatch({type:"adDataLoadFailed",adId:e.ad.id,sessionId:n});return}t._dispatch({type:"adDataLoaded",adId:e.ad.id,ad:i,sessionId:n})}).catch(function(){t._dispatch({type:"adDataLoadFailed",adId:e.ad.id,sessionId:n})});break;case"playerAutoplay":t._player.autoplay();break;case"playerPause":t._player.pause();break;case"playerPlay":t._player.play()}}()}catch(e){u.e(e)}finally{u.f()}}},{key:"_getVideoPlayerDimensions",value:function(){var e=this._adPlayer;if(!e.videoElement)throw Error("attempting to get video player dimensions without video element");return{width:e.videoElement.clientWidth,height:e.videoElement.clientHeight}}}]),t}();function U(){return(U=(0,a.Z)(u().mark(function e(t){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){var n=new Date().getTime(),r=!0;console.debug("elementInDOM: waiting for ad player element..."),function a(){if(!t.parentElement){console.debug("elementInDOM: calling requestAnimationFrame at "+(new Date().getTime()-n)+"ms");try{window.requestAnimationFrame(function(){if(r){var e=new Date().getTime()-n;console.debug("elementInDOM: requestAnimationFrame resolved at "+e+"ms"),e>4e3&&(r=!1)}a()})}catch(e){console.error("elementInDOM: requestAnimationFrame exception",e)}return}console.debug("elementInDOM: ad player element in DOM, resolving"),e()}()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}},79447:function(e,t,n){n.d(t,{R:function(){return s}});var r=n(21512),a=n(70890);function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=e.length-1;n>=0;n--){var o=function(e,t){if(null!==e.sequence)return null;if(null===e.id||null===e.title)return(0,a.H)("parseAdData received ad with unexpected null(s)",{extra:{vastAd:e}}),null;var n,o=i(e.creatives);try{for(o.s();!(n=o.n()).done;){var s=function(){var a=n.value;if("linear"!==a.type)return"continue";var o,s=[],u=i(a.mediaFiles);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(null!==c.mimeType&&null!==c.fileURL){var d=function(e){var t=e.toLowerCase();return(0,r.Ny)(t,"video/mp4")?"video":(0,r.Ny)(t,"audio/mp3")||(0,r.Ny)(t,"audio/mpeg")?"audio":null}(c.mimeType);null!==d&&s.push({type:d,data:c,nonNullableData:{fileURL:c.fileURL}})}}}catch(e){u.e(e)}finally{u.f()}if(0===s.length)return"continue";s.sort(function(e){return function(t,n){if("video"===t.type&&"video"===n.type){var r=l(e.height,t.data.height,n.data.height);return 0!==r?r:l(300,t.data.bitrate,n.data.bitrate)}return"video"===t.type?-1:"video"===n.type?1:0}}(t));var p=s[0],f=p.data,h=null!==a.skipDelay&&a.skipDelay>0?a.skipDelay:null;return{v:{ad:e,creative:a,media:function(){switch(p.type){case"audio":return{type:"audio",companion:function(e){var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if("companion"===a.type){var o,s=i(a.variations);try{for(s.s();!(o=s.n()).done;){var l=o.value.staticResources.find(function(e){return e.creativeType&&(0,r.Ny)(e.creativeType,"image/")});if(void 0!==l)return{companionImageUrl:l.url,creative:a}}}catch(e){s.e(e)}finally{s.f()}}}}catch(e){n.e(e)}finally{n.f()}return null}(e.creatives)};case"video":return{type:"video",companion:null}}}(),mediaFile:f,skipDelay:h,nonNullableData:{ad:{id:e.id,title:e.title},mediaFile:p.nonNullableData}}}}();if("continue"!==s&&"object"==typeof s)return s.v}}catch(e){o.e(e)}finally{o.f()}return null}(e[n],t);if(o)return o}return null}function l(e,t,n){return Math.abs(e-t)-Math.abs(e-n)}},12772:function(e,t,n){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{c:function(){return i}});var a=new Set(["accessToken","debug","download","in_playlist","json","published","requestSource","sessionId","showRedirect","size","skipAds","style","t","token","track","type"].map(function(e){return e.toLowerCase()}));function i(e,t){var n,i,o,s=function(e){switch(e){case"Embed":return"Embed";case"OmnyFm":return"OmnyFm";case"Twitter":return"Twitter"}}(t.embedSource),l=(n=e.url,i=new URL(n),o=[],i.searchParams.forEach(function(e,t){a.has(t.toLowerCase())||o.push({key:t,value:e})}),o);return function(t){var n=new URL(t);n.searchParams.set("requestSource","Widget"),n.searchParams.set("utm_source",s),!n.searchParams.has("embeddedUrl")&&e.referrer&&n.searchParams.set("embeddedUrl",e.referrer);var a,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}}(e))){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}(l);try{for(i.s();!(a=i.n()).done;){var o=a.value,u=o.key,c=o.value;n.searchParams.append(u,c)}}catch(e){i.e(e)}finally{i.f()}return n.toString()}}},54547:function(e,t,n){n.d(t,{y9:function(){return O},GT:function(){return A},pm:function(){return P},pg:function(){return T},ej:function(){return Z}});var r=n(58823),a=n(1163),i=n(86707),o=n(67294),s=n(86264),l=n(88259),u=n(66406);function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(){return{played:!1,times:[[.25,"Played 25%"],[.5,"Played 50%"],[.75,"Played 75%"],[.99,"Played 100%"]]}}var f=n(12772),h=n(27353),y=n(27029);function m(e){var t=e.width,n=e.height;return"".concat(t,"x").concat(n)}var v=n(12135),g=n.n(v);function b(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).debug.apply(e,["Omny Embed Player.js receiver received:"].concat(n))}function _(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).debug.apply(e,["Omny Embed Player.js receiver sent:"].concat(n))}var S=n(5048),k=n(70890);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Z(e,t){var n,r,i,c,d,p,y,m,v=o.useRef(null),g=null!==(m=v.current)&&void 0!==m?m:(i=(0,l.M)(),c=(0,s.K5)("omnyFmTrafficBaseUrl"),d=(0,s.tQ)("embedDisableConsumptionAnalytics"),p=new S.M({accessToken:null!==(n=t.accessToken)&&void 0!==n?n:void 0,autoMount:!1,consumptionSource:"Web",decorateClipAudioUrl:"browser"===i.type?(0,f.c)(i,t):void 0,onConsumptionError:function(e,t){return(0,k.H)(e,{extra:t})},trafficBaseUrl:c,disableConsumptionAnalytics:d,apiMiddleware:u.T}).createClipPlayer(e),y=new h.Y({embedConfig:t,player:p,initialClip:p.clip,firstClipStartTimeSeconds:null!==(r=t.firstClipStartTimeSeconds)&&void 0!==r?r:void 0,playlistId:null,referrer:"browser"===i.type?i.referrer:""}),v.current=y,y),b=o.useState(function(){return T(g)}),_=(0,a.Z)(b,2),w=_[0],Z=_[1],E=o.useMemo(function(){return P(g)},[g]),M=o.useMemo(function(){return C(C({},w),E)},[w,E]);return o.useEffect(function(){g.mount(),O(g,Z),A(g,t)},[t,g]),M}function T(e){return{adMediaState:e.adMediaState,adVideoElement:e.adVideoElement,buffering:e.buffering,clipCurrentTime:e.clipCurrentTime,clipDuration:e.clipDuration,hasPlayed:!1,mode:e.mode,playerState:e.playerState}}function P(e){return{adClick:e.adClick.bind(e),adSkip:e.adSkip.bind(e),play:e.play.bind(e),seek:e.seek.bind(e),seekBackward:e.seekBackward.bind(e),seekForward:e.seekForward.bind(e),togglePlayback:e.togglePlayback.bind(e)}}function A(e,t){var n,r,i,o;!function(e,t){if(t.customGATrackingId){if(!window.gtag){console.error("Custom Google Analytics GA4: window.gtag undefined, possibly Google Analytics script is blocked");return}gtag("config",t.customGATrackingId,{cookie_flags:"SameSite=None; Secure",anonymize_ip:!0});var n=p();e.onClipChange(function(){n=p()}),e.onClipTimeUpdate(function(){var t=function(e,t,n){var r={played:e.played,times:[]},i=[];e.played||(r.played=!0,i.push("Play"));var o,s=t/n,l=c(e.times);try{for(l.s();!(o=l.n()).done;){var u=(0,a.Z)(o.value,2),d=u[0],p=u[1];s>d?i.push(p):r.times.push([d,p])}}catch(e){l.e(e)}finally{l.f()}return[r,i]}(n,e.clipCurrentTime,e.clipDuration),r=(0,a.Z)(t,2),i=r[0],o=r[1];n=i;var s,l=c(o);try{for(l.s();!(s=l.n()).done;){var u=s.value;(function(e,t,n,r){var a={event_category:e,event_label:n,value:void 0};console.debug("Custom Google Analytics event:",t,a),gtag("event",t,a)})("Omny Studio Audio",u,e.clip.Title)}}catch(e){l.e(e)}finally{l.f()}})}}(e,t),(o="mediaSession"in navigator?navigator.mediaSession:null)&&e.onPlay(function(){var t;t=[],e.clip.ImageUrl?t.push({src:(0,y.f0)(e.clip.ImageUrl,"thumbnail"),sizes:m(y.PC.thumbnail),type:"image/jpeg"},{src:(0,y.f0)(e.clip.ImageUrl,"small"),sizes:m(y.PC.small),type:"image/jpeg"},{src:(0,y.f0)(e.clip.ImageUrl,"medium"),sizes:m(y.PC.medium),type:"image/jpeg"},{src:(0,y.f0)(e.clip.ImageUrl,"large"),sizes:m(y.PC.large),type:"image/jpeg"}):t.push({src:y.QC,type:"image/svg"}),o.metadata=new MediaMetadata({title:e.clip.Title,artist:e.program.Name,artwork:t}),o.setActionHandler("play",function(){e.play()}),o.setActionHandler("pause",function(){e.pause()}),o.setActionHandler("seekbackward",function(){e.seekBackward(15)}),o.setActionHandler("seekforward",function(){e.seekForward(15)})}),r={referrerOverride:null!==(n=t.referrerOverride)&&void 0!==n?n:void 0},(i=new(g()).Receiver([g().EVENTS.ENDED,g().EVENTS.PAUSE,g().EVENTS.PLAY,g().EVENTS.READY,g().EVENTS.TIMEUPDATE],[g().METHODS.GETCURRENTTIME,g().METHODS.GETDURATION,g().METHODS.GETMUTED,g().METHODS.GETPAUSED,g().METHODS.GETVOLUME,g().METHODS.MUTE,g().METHODS.PAUSE,g().METHODS.PLAY,g().METHODS.SETCURRENTTIME,g().METHODS.SETVOLUME,g().METHODS.UNMUTE],r)).on(g().METHODS.GETCURRENTTIME,function(t){var n=e.clipCurrentTime;b("Get current time:",n),t(n)}),i.on(g().METHODS.GETDURATION,function(t){var n=e.clipDuration;b("Get duration:",n),t(n)}),i.on(g().METHODS.GETMUTED,function(t){var n=e.muted;b("Get muted:",n),t(n)}),i.on(g().METHODS.GETPAUSED,function(t){var n=!e.isPlaying;b("Get paused:",n),t(n)}),i.on(g().METHODS.GETVOLUME,function(t){var n=100*e.volume;b("Get volume:",n),t(n)}),i.on(g().METHODS.MUTE,function(){b("Mute"),e.setMuted(!0)}),i.on(g().METHODS.PAUSE,function(){b("Pause"),e.pause()}),i.on(g().METHODS.PLAY,function(){b("Play"),e.play()}),i.on(g().METHODS.SETCURRENTTIME,function(t){b("Set current time:",t);var n=e.seek(t);n.ok||i.emit("error",{code:-1,msg:n.message})}),i.on(g().METHODS.SETVOLUME,function(t){b("Set volume:",t),e.setVolume(t/100)}),i.on(g().METHODS.UNMUTE,function(){b("Unmute"),e.setMuted(!1)}),e.onClipEnd(function(){_("Ended"),i.emit(g().EVENTS.ENDED)}),e.onClipTimeUpdate(function(){var t={seconds:e.clipCurrentTime,duration:e.clipDuration};_("Time update:",t),i.emit(g().EVENTS.TIMEUPDATE,t)}),e.onError(function(e){_("Error",e),i.emit(g().EVENTS.ERROR,{code:-1,msg:e.code+": "+e.message})}),e.onPause(function(){_("Pause"),i.emit(g().EVENTS.PAUSE)}),e.onPlay(function(){_("Play"),i.emit(g().EVENTS.PLAY)}),console.debug("Omny Embed Player.js receiver ready"),i.ready(),t.autoplay&&e.autoplay()}function O(e,t){e.onAdMediaStateChange(function(){t(function(t){return(0,i.updateObject)(t,{adMediaState:e.adMediaState})})}),e.onBufferingChange(function(){t(function(t){return(0,i.updateObject)(t,{buffering:e.buffering})})}),e.onModeChange(function(){t(function(t){return(0,i.updateObject)(t,{mode:e.mode})})}),e.onPlayerStateChange(function(){t(function(t){return(0,i.updateObject)(t,{clipCurrentTime:e.clipCurrentTime,clipDuration:e.clipDuration,hasPlayed:"playing"===e.playerState.type||t.hasPlayed,playerState:e.playerState})})})}},59080:function(e,t,n){n.d(t,{P3:function(){return v},Wk:function(){return y}});var r=n(69092),a=n(9474),i=n(12889),o=n(58074),s=n(3385),l=n(48039),u=n(58823),c=n(40839),d=n(70890),p=n(24335);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,o.Z)(e);if(t){var a=(0,o.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var h=function(){function e(){(0,s.Z)(this,e),(0,u.Z)(this,"_actionObservable",(0,c._)()),(0,u.Z)(this,"_bufferingChangeObservable",(0,c._)())}return(0,l.Z)(e,[{key:"onAction",value:function(e){return this._actionObservable.observe(e)}},{key:"onBufferingChange",value:function(e){return this._bufferingChangeObservable.observe(e)}}]),e}(),y=function(e){(0,a.Z)(n,e);var t=f(n);function n(){var e;(0,s.Z)(this,n);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,u.Z)((0,r.Z)(e),"_buffering",!1),(0,u.Z)((0,r.Z)(e),"_currentTime",0),(0,u.Z)((0,r.Z)(e),"_muted",!1),(0,u.Z)((0,r.Z)(e),"_volume",1),e}return(0,l.Z)(n,[{key:"buffering",get:function(){return this._buffering}},{key:"currentTime",get:function(){return this._currentTime}},{key:"muted",get:function(){return this._muted},set:function(e){this._muted=e}},{key:"volume",get:function(){return this._volume},set:function(e){this._volume=e}},{key:"userInteraction",value:function(){throw Error("not implemented")}},{key:"pause",value:function(){throw Error("not implemented")}},{key:"play",value:function(){throw Error("not implemented")}},{key:"setCurrentTime",value:function(e){this._currentTime=e}},{key:"setSrc",value:function(e,t){throw Error("not implemented")}}]),n}(h),m={code:2,message:"Server could not be reached"},v=function(e){(0,a.Z)(n,e);var t=f(n);function n(e){var a;(0,s.Z)(this,n),a=t.call(this),(0,u.Z)((0,r.Z)(a),"_mediaElement",void 0),(0,u.Z)((0,r.Z)(a),"_buffering",!1),(0,u.Z)((0,r.Z)(a),"_lastMetadataDuration",null),(0,u.Z)((0,r.Z)(a),"_shouldBless",!0),a._mediaElement=e;for(var i=0,o=["canplay","loadstart","playing","suspend","waiting"];i<o.length;i++){var l=o[i];e.addEventListener(l,function(){var t=e.readyState<e.HAVE_FUTURE_DATA;t!==a._buffering&&(a._buffering=t,a._bufferingChangeObservable.dispatch(t))})}return e.addEventListener("durationchange",function(){if(isNaN(e.duration))throw Error("media duration NaN in durationchange");a._actionObservable.dispatch({type:"durationChange",duration:e.duration})}),e.addEventListener("ended",function(){if(null===a._lastMetadataDuration){p.env.SDK_BUILD||(0,d.H)("media ended fired without lastMetadataDuration",{extra:{mediaDuration:e.duration}}),a._actionObservable.dispatch({type:"error",error:m});return}if(e.duration!==a._lastMetadataDuration){a._actionObservable.dispatch({type:"error",error:m});return}a._actionObservable.dispatch({type:"ended"})}),e.addEventListener("error",function(){a._actionObservable.dispatch({type:"error",error:e.error})}),e.addEventListener("loadedmetadata",function(){if(a._lastMetadataDuration=null,isNaN(e.duration)){console.error("media duration NaN in loadedmetadata");return}if(e.duration===1/0){a._actionObservable.dispatch({type:"error",error:m});return}a._lastMetadataDuration=e.duration,a._actionObservable.dispatch({type:"loadedMetadata",duration:e.duration})}),e.addEventListener("pause",function(){a._actionObservable.dispatch({type:"pause"})}),e.addEventListener("play",function(){a._actionObservable.dispatch({type:"play"})}),e.addEventListener("playing",function(){a._actionObservable.dispatch({type:"playing"})}),e.addEventListener("seeked",function(){a._actionObservable.dispatch({type:"seeked"})}),e.addEventListener("seeking",function(){a._actionObservable.dispatch({type:"seeking",currentTime:e.currentTime})}),e.addEventListener("timeupdate",function(){a._actionObservable.dispatch({type:"timeUpdate",currentTime:e.currentTime})}),a}return(0,l.Z)(n,[{key:"buffering",get:function(){return this._buffering}},{key:"muted",get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e}},{key:"volume",get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e}},{key:"userInteraction",value:function(){this._shouldBless&&(this._shouldBless=!1,this._mediaElement.load())}},{key:"pause",value:function(){this._mediaElement.pause()}},{key:"play",value:function(e){var t,n=this,r=this._mediaElement;this._shouldBless=!1,(null!==(t=r.play())&&void 0!==t?t:Promise.resolve()).catch(function(t){if(t instanceof DOMException)console.error("mediaElement.play() rejected with DOMException",t),n._actionObservable.dispatch({type:"playPromiseRejected",playPromiseId:e,exceptionName:"NotAllowedError"===t.name?"NotAllowedError":"unhandled"});else throw t})}},{key:"setCurrentTime",value:function(e){!p.env.SDK_BUILD&&(null===this._lastMetadataDuration?(0,d.H)("Attempting to set a new current time when last metadata duration is null"):e-this._lastMetadataDuration>.001&&console.log("Attempting to set a new current time which is greater than the last metadata duration",{lastMetadataDuration:this._lastMetadataDuration,newCurrentTime:e})),this._mediaElement.currentTime=e}},{key:"setSrc",value:function(e,t){var n=this._mediaElement;n.src=e,n.title=t,this._lastMetadataDuration=null}}],[{key:"isSupported",value:function(){return"undefined"!=typeof document}}]),n}(h)},40839:function(e,t,n){n.d(t,{_:function(){return r}});function r(){var e=new Set;return{observe:function(t){return e.add(t),function(){e.delete(t)}},dispatch:function(t){for(var n=Array.from(e),r=0;r<n.length;r++)(0,n[r])(t)},removeObservers:function(){e.clear()}}}},5048:function(e,t,n){n.d(t,{M:function(){return X}});var r,a=n(2809),i=n(3385),o=n(48039),s=n(58823),l=n(49715),u=n.n(l),c=n(32914),d=(r=(0,a.Z)(u().mark(function e(t,n){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://api.omny.fm"+t,n));case 1:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)}),p=n(59080),f=n(93860),h=n(69092),y=n(49069),m=n(1163),v=n(9474),g=n(12889),b=n(58074),_=n(33768),S=n(97195),k=n(18598),w=n(68534),C=function(){function e(t){(0,i.Z)(this,e),(0,s.Z)(this,"_options",void 0),(0,s.Z)(this,"_state",{completedSessions:[],currentSession:null}),this._options=t}return(0,o.Z)(e,[{key:"state",get:function(){return this._state}},{key:"pause",value:function(e){var t=this._state;if(!t.currentSession){this._error("pause consumption event received without session");return}var n=t.currentSession.pendingStart;if(!n){this._error("pause consumption event received without pending start");return}if(this._log("pause",{time:e,pendingStart:n}),e.audioPosition<n.audioPosition){this._error("pause consumption event received with an audio position before the pending start audio position",{pausePosition:e.audioPosition,pendingStartPosition:n.audioPosition});return}t.currentSession.session.times.push({start:n,stop:e}),t.currentSession.pendingStart=null,this._options.onChange(t)}},{key:"play",value:function(e){var t=this._state;if(!t.currentSession){this._error("play consumption event received without session");return}if(t.currentSession.pendingStart){this._error("play consumption event received after previous play event");return}this._log("play",{time:e}),t.currentSession.pendingStart=e,this._options.onChange(t)}},{key:"seek",value:function(e){var t=e.fromPosition,n=e.toPosition,r=e.eventTimestamp,a=this._state;if(!a.currentSession){this._error("seek consumption event received without session");return}var i=a.currentSession.pendingStart;if(i){if(this._log("seek",{fromPosition:t,toPosition:n,pendingStart:i,eventTimestamp:r}),t<i.audioPosition){this._error("seek consumption event received with a from position before the pending start audio position",{pendingStartPosition:i.audioPosition,seekFromPosition:t});return}a.currentSession.session.times.push({start:i,stop:{audioPosition:t,eventTimestamp:r}}),a.currentSession.pendingStart={audioPosition:n,eventTimestamp:r},this._options.onChange(a)}}},{key:"setClip",value:function(e){var t,n=e.clip,r=e.sessionId,a=e.time,i=this._state,o=null===(t=i.currentSession)||void 0===t?void 0:t.pendingStart;this._log("setClip",{time:a,pendingStart:o}),i.currentSession&&(o&&(a.audioPosition===o.audioPosition||(a.audioPosition<o.audioPosition?this._error("setClip consumption event received with an audio position before the pending start audio position",{setClipPosition:a.audioPosition,pendingStartPosition:o.audioPosition}):i.currentSession.session.times.push({start:o,stop:a}))),i.currentSession.session.times.length>0&&(i.completedSessions.push({metadata:i.currentSession.session.metadata,times:i.currentSession.session.times}),this._options.onChange(i))),i.currentSession={session:{metadata:{id:r,clip:{Id:n.Id,OrganizationId:n.OrganizationId}},times:[]},pendingStart:null}}},{key:"_error",value:function(e,t){this._options.onError&&this._options.onError(e,t)}},{key:"_log",value:function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(t=console).debug.apply(t,["Omny SDK consumption:",e].concat(r))}}]),e}();function Z(e,t){if(!e.currentSession)return e.completedSessions;var n=e.currentSession.session.times,r=e.currentSession.pendingStart;r&&t&&r.audioPosition<t.audioPosition&&(n=n.slice()).push({start:r,stop:t});var a=e.completedSessions;return n.length>0&&(a=a.slice()).push({metadata:e.currentSession.session.metadata,times:n}),a}function T(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){if(0===t.length)return null;var n,r=[],a=T(t);try{for(a.s();!(n=a.n()).done;){var i,o=n.value,s=1,l=T(o.times);try{for(l.s();!(i=l.n()).done;){var u=i.value;r.push(O(o,"Start",u.start,s++),O(o,"Stop",u.stop,s++))}}catch(e){l.e(e)}finally{l.f()}}}catch(e){a.e(e)}finally{a.f()}return{Source:e,Events:r,Completed:!0}}function O(e,t,n,r){return{OrganizationId:e.metadata.clip.OrganizationId,ClipId:e.metadata.clip.Id,SessionId:e.metadata.id,Type:t,Position:n.audioPosition,SeqNumber:r,Timestamp:n.eventTimestamp}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var M=function(){var e;function t(e){(0,i.Z)(this,t),(0,s.Z)(this,"playerId",void 0),(0,s.Z)(this,"source",void 0),(0,s.Z)(this,"heartbeat",void 0),(0,s.Z)(this,"storage",void 0),(0,s.Z)(this,"fetch",void 0),this.playerId=e.playerId,this.source=e.source,this.heartbeat=e.heartbeat,this.storage=e.storage,this.fetch=e.fetch}return(0,o.Z)(t,[{key:"dispatch",value:(e=(0,a.Z)(u().mark(function e(t){var n,r,a,i,o,s;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}(this.storage.getStoredIds()),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=31;break}if((a=r.value)!==this.playerId){e.next=8;break}return e.abrupt("continue",29);case 8:i=this.storage.getStoredData(a),o=this.actionForData(i,t),e.t0=o.type,e.next="delete"===e.t0?13:"send"===e.t0?15:"ignore"===e.t0?28:29;break;case 13:return this.storage.deleteStoredData(a),e.abrupt("break",29);case 15:return this.storage.deleteStoredData(a),e.next=18,this.fetch(o.request);case 18:s=e.sent,e.t1=s.type,e.next="permanentError"===e.t1?22:"success"===e.t1?23:"temporaryError"===e.t1?24:27;break;case 22:case 23:return e.abrupt("break",27);case 24:return this.storage.storeState(a,o.data.stateUnsafe),this.storage.storeHeartbeat(a,o.data.heartbeatUnsafe),e.abrupt("break",27);case 27:case 28:return e.abrupt("break",29);case 29:e.next=4;break;case 31:e.next=36;break;case 33:e.prev=33,e.t2=e.catch(2),n.e(e.t2);case 36:return e.prev=36,n.f(),e.finish(36);case 39:case"end":return e.stop()}},e,this,[[2,33,36,39]])})),function(t){return e.apply(this,arguments)})},{key:"actionForData",value:function(e,t){if(!e)return{type:"ignore"};try{n=e.heartbeatUnsafe.eventTimestamp}catch(e){n=null}if("number"!=typeof n||n<0)return{type:"delete"};var n,r,a=t-n;if(a>this.heartbeat.deleteIfOlderThanSeconds)return{type:"delete"};try{r=Z(e.stateUnsafe,e.heartbeatUnsafe)}catch(e){return{type:"delete"}}var i=A(this.source,r);return null===i?{type:"delete"}:a>this.heartbeat.sendIfOlderThanSeconds?{type:"send",request:i,data:e}:{type:"ignore"}}}]),t}();function I(){var e=window.crypto||window.msCrypto;return e&&e.randomUUID?e.randomUUID():e?"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(t){return(t^e.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}):"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}var x=function(){function e(t){var n,r,o,l,c=this,d=t.sendConsumptionEventsFunctions,p=t.source,f=t.getAudioCurrentTime,h=t.getEventTimestamp,y=t.onError;(0,i.Z)(this,e),(0,s.Z)(this,"events",void 0),(0,s.Z)(this,"_heartbeatIntervalId",void 0),(0,s.Z)(this,"_dispatchTimeoutId",-1),(0,s.Z)(this,"_pageGoingAwayCallback",void 0);var m=d.beacon,v=d.fetch,g=I(),b=(r=(n={storageSource:{get length(){try{return window.localStorage.length}catch(e){return 0}},key:function(e){try{return window.localStorage.key(e)}catch(e){return null}},getItem:function(e){try{return window.localStorage.getItem(e)}catch(e){return null}},removeItem:function(e){try{window.localStorage.removeItem(e)}catch(e){return}},setItem:function(e,t){try{window.localStorage.setItem(e,t)}catch(e){return}}},stateKeyPrefix:"OMNY_CONSUMPTION_STATE_",heartbeatKeyPrefix:"OMNY_CONSUMPTION_HEARTBEAT_"}).storageSource,o=n.stateKeyPrefix,l=n.heartbeatKeyPrefix,{storeState:function(e,t){r.setItem(o+e,JSON.stringify(t))},storeHeartbeat:function(e,t){r.setItem(l+e,JSON.stringify(t))},getStoredIds:function(){for(var e=new Set,t=function(t,n){if(n&&n.startsWith(t)){var r=n.slice(t.length);e.add(r)}},n=0;n<r.length;n++){var a=r.key(n);t(o,a),t(l,a)}return Array.from(e)},getStoredData:function(e){var t,n,a,i;try{t=JSON.parse(null!==(a=r.getItem(o+e))&&void 0!==a?a:"")}catch(e){t=null}try{n=JSON.parse(null!==(i=r.getItem(l+e))&&void 0!==i?i:"")}catch(e){n=null}return null===t&&null===n?null:{stateUnsafe:t,heartbeatUnsafe:n}},deleteStoredData:function(e){r.removeItem(o+e),r.removeItem(l+e)}}),_=new M({playerId:g,source:p,heartbeat:{sendIfOlderThanSeconds:(0,w.Z)(5),deleteIfOlderThanSeconds:(0,k.Z)(480)},storage:b,fetch:v});this.events=new C({onChange:function(e){b.storeState(g,e),void 0===c._heartbeatIntervalId&&(c._heartbeatIntervalId=window.setInterval(function(){b.storeHeartbeat(g,{audioPosition:f(),eventTimestamp:h()})},1e3))},onError:y}),function e(){c._dispatchTimeoutId=window.setTimeout((0,a.Z)(u().mark(function t(){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.dispatch(h());case 2:e();case 3:case"end":return t.stop()}},t)})),5e3)}();var S=!1;this._pageGoingAwayCallback=function(){if(!0!==S){S=!0;var e=A(p,Z(c.events.state,{audioPosition:f(),eventTimestamp:h()}));null!==e&&m(e)}},window.addEventListener("pagehide",this._pageGoingAwayCallback),window.addEventListener("beforeunload",this._pageGoingAwayCallback)}return(0,o.Z)(e,[{key:"destroy",value:function(){window.clearInterval(this._heartbeatIntervalId),window.clearInterval(this._dispatchTimeoutId),window.removeEventListener("pagehide",this._pageGoingAwayCallback),window.removeEventListener("beforeunload",this._pageGoingAwayCallback)}}]),e}(),D=n(40839),U=n(73700),j=n(24335);function B(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,b.Z)(e);if(t){var a=(0,b.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,g.Z)(this,n)}}var L=function(e){(0,v.Z)(n,e);var t=N(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"This player instance has been destroyed and cannot be used";return(0,i.Z)(this,n),(e=t.call(this,r)).name="PlayerDestroyedError",e}return(0,o.Z)(n)}((0,_.Z)(Error)),z=function(){function e(t){var n=this,r=t.audio,a=t.clip,o=t.autoMount,l=t.consumptionSource,u=t.decorateClipAudioUrl,c=t.onConsumptionError,d=t.trafficBaseUrl,p=t.disableConsumptionAnalytics;(0,i.Z)(this,e),(0,s.Z)(this,"_audio",void 0),(0,s.Z)(this,"_clip",void 0),(0,s.Z)(this,"_consumption",null),(0,s.Z)(this,"_consumptionSource",void 0),(0,s.Z)(this,"_decorateClipAudioUrl",void 0),(0,s.Z)(this,"_disableConsumptionAnalytics",void 0),(0,s.Z)(this,"_dispatchCounter",0),(0,s.Z)(this,"_hasMounted",!1),(0,s.Z)(this,"_nextPlayPromiseId",0),(0,s.Z)(this,"_onConsumptionError",void 0),(0,s.Z)(this,"_playerState",{type:"paused",pauseState:{type:"noSrc"},pendingCurrentTime:0}),(0,s.Z)(this,"_trafficBaseUrl",void 0),(0,s.Z)(this,"_bufferingChangeObservable",(0,D._)()),(0,s.Z)(this,"_clipChangeObservable",(0,D._)()),(0,s.Z)(this,"_clipEndObservable",(0,D._)()),(0,s.Z)(this,"_errorObservable",(0,D._)()),(0,s.Z)(this,"_pauseObservable",(0,D._)()),(0,s.Z)(this,"_playObservable",(0,D._)()),(0,s.Z)(this,"_playerStateChangeObservable",(0,D._)()),(0,s.Z)(this,"_timeUpdateObservable",(0,D._)()),this._audio=r,this._clip=a,this._audio.onAction(function(e){n._dispatchAudio(e)}),this._audio.onBufferingChange(function(){n._bufferingChangeObservable.dispatch()}),this._consumptionSource=null!=l?l:"CustomWeb",this._decorateClipAudioUrl=null!=u?u:function(e){return e},this._trafficBaseUrl=null!=d?d:"https://traffic.omny.fm",this._onConsumptionError=c,this._disableConsumptionAnalytics=void 0!==p&&p,(void 0===o||o)&&this._internalOnly_mount()}return(0,o.Z)(e,[{key:"_internalOnly_mount",value:function(){var e,t=this;if(!this._hasMounted){this._hasMounted=!0;var n=this._disableConsumptionAnalytics?{beacon:function(){},fetch:(e=(0,a.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{type:"success"});case 1:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})}:function(e,t){var n=e+"/api/consumption/events";function r(){return(r=(0,a.Z)(u().mark(function e(t){var r;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==navigator.sendBeacon){e.next=2;break}return e.abrupt("return");case 2:r=JSON.stringify(t),navigator.sendBeacon(n,r);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function i(){return(i=(0,a.Z)(u().mark(function e(r){var i;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=JSON.stringify(r),e.abrupt("return",fetch(n,{method:"POST",body:i,headers:{"Content-Type":"application/json"}}).then(function(){var e=(0,a.Z)(u().mark(function e(r){var a;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.status>=400&&r.status<500)){e.next=2;break}return e.abrupt("return",{type:"permanentError"});case 2:if(!(200!==r.status)){e.next=4;break}return e.abrupt("return",{type:"temporaryError"});case 4:return e.next=6,r.json();case 6:if(!(!(a=e.sent)||"boolean"!=typeof a.Enabled)){e.next=10;break}return null==t||t("Invalid body received from "+n),e.abrupt("return",{type:"temporaryError"});case 10:return e.abrupt("return",{type:"success"});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(){return{type:"temporaryError"}}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}return{beacon:function(e){return r.apply(this,arguments)},fetch:function(e){return i.apply(this,arguments)}}}(this._trafficBaseUrl,this._onConsumptionError);this._consumption=new x({sendConsumptionEventsFunctions:n,source:this._consumptionSource,getAudioCurrentTime:function(){return t.currentTime},getEventTimestamp:F,onError:this._onConsumptionError}),this._initializeClip()}}},{key:"clip",get:function(){return this._clip}},{key:"buffering",get:function(){return this._getAudio().buffering}},{key:"currentTime",get:function(){var e=this._playerState,t=(0,U.FW)(e),n=(0,U.Xn)(e);return t?Math.min(n,t.duration):n}},{key:"duration",get:function(){var e=this._playerState,t=(0,U.FW)(e),n=this._clip.DurationSeconds;return t?t.duration:n}},{key:"muted",get:function(){return this._getAudio().muted},set:function(e){this._getAudio().muted=e}},{key:"state",get:function(){var e=this._playerState;switch(e.type){case"error":return{type:"error",error:e.error};case"paused":return{type:"paused"};case"playing":return{type:"playing"}}}},{key:"volume",get:function(){return this._getAudio().volume},set:function(e){this._getAudio().volume=e}},{key:"autoplay",value:function(){this._dispatchPlayer({type:"autoplay",playPromiseId:this._nextPlayPromiseId++})}},{key:"userInteraction",value:function(){this._getAudio().userInteraction()}},{key:"destroy",value:function(){var e;if(null===this._audio)throw new L("Player has already been destroyed");this._audio.pause(),this._bufferingChangeObservable.removeObservers(),this._clipChangeObservable.removeObservers(),this._clipEndObservable.removeObservers(),this._errorObservable.removeObservers(),this._pauseObservable.removeObservers(),this._playObservable.removeObservers(),this._playerStateChangeObservable.removeObservers(),this._timeUpdateObservable.removeObservers(),null===(e=this._consumption)||void 0===e||e.destroy(),this._audio=null}},{key:"pause",value:function(){this._dispatchPlayer({type:"pause"})}},{key:"play",value:function(){this._dispatchPlayer({type:"play",playPromiseId:this._nextPlayPromiseId++})}},{key:"seek",value:function(e){this._dispatchPlayer({type:"seek",toTime:e})}},{key:"destroyed",get:function(){return null===this._audio}},{key:"onBufferingChange",get:function(){return this._bufferingChangeObservable.observe}},{key:"onClipEnd",get:function(){return this._clipEndObservable.observe}},{key:"onError",get:function(){return this._errorObservable.observe}},{key:"onPause",get:function(){return this._pauseObservable.observe}},{key:"onPlay",get:function(){return this._playObservable.observe}},{key:"onPlayerStateChange",get:function(){return this._playerStateChangeObservable.observe}},{key:"onTimeUpdate",get:function(){return this._timeUpdateObservable.observe}},{key:"_setClip",value:function(e){this._clip=e,this._initializeClip(),this._clipChangeObservable.dispatch(this.clip)}},{key:"_dispatch",value:function(e,t,n){var r,a=this._playerState;++this._dispatchCounter,q("playerState ".concat(e," action and existing state"),{action:t,existingState:a});try{r=n(a,t)}catch(e){if(e instanceof U.V)return j.env.SDK_BUILD||S.Tb(e),[];throw e}var i=Array.isArray(r)?r:[r,[]],o=(0,m.Z)(i,2),s=o[0],l=o[1];return q("playerState new state",{newState:s}),this._playerState=s,a!==s&&this._playerStateChangeObservable.dispatch(),(0,U.Xn)(a)!==(0,U.Xn)(s)&&this._timeUpdateObservable.dispatch(),l}},{key:"_dispatchAudio",value:function(e){var t,n=this._dispatch("audio",e,U.X0),r=this._getAudio(),a=B(n);try{for(a.s();!(t=a.n()).done;){var i,o,s,l=t.value;switch(l.type){case"audioClearSrc":r.setSrc("","");break;case"audioPause":r.pause();break;case"audioPlay":r.play(l.playPromiseId);break;case"audioSeek":r.setCurrentTime(l.timeSeconds);break;case"audioSetSrc":r.setSrc(l.audioData.src,l.audioData.title);break;case"onEnded":this._clipEndObservable.dispatch();break;case"onError":this._errorObservable.dispatch(l.error);break;case"onPause":null===(i=this._consumption)||void 0===i||i.events.pause(this._getCurrentConsumptionTime(l.currentTime)),this._pauseObservable.dispatch();break;case"onPlay":null===(o=this._consumption)||void 0===o||o.events.play(this._getCurrentConsumptionTime(l.currentTime)),this._playObservable.dispatch();break;case"onSeek":null===(s=this._consumption)||void 0===s||s.events.seek({fromPosition:l.fromTime,toPosition:l.toTime,eventTimestamp:F()})}}}catch(e){a.e(e)}finally{a.f()}}},{key:"_dispatchPlayer",value:function(e){var t,n=this._dispatch("player",e,U.WC),r=this._getAudio(),a=B(n);try{for(a.s();!(t=a.n()).done;){var i=t.value;switch(i.type){case"audioPause":r.pause();break;case"audioPlay":r.play(i.playPromiseId);break;case"audioSeek":r.setCurrentTime(i.toTime);break;case"audioSetSrc":r.setSrc(i.audioData.src,i.audioData.title)}}}catch(e){a.e(e)}finally{a.f()}}},{key:"_getCurrentConsumptionTime",value:function(e){return{audioPosition:e,eventTimestamp:F()}}},{key:"_assertNotDestroyed",value:function(){if(this.destroyed)throw new L}},{key:"_initializeClip",value:function(){var e,t=this._clip,n=this._decorateClipAudioUrl(t.AudioUrl,t);null===(e=this._consumption)||void 0===e||e.events.setClip({clip:t,sessionId:I(),time:this._getCurrentConsumptionTime(this.currentTime)}),this._dispatchPlayer({type:"setData",audioData:{src:n,title:t.Title}})}},{key:"_getAudio",value:function(){if(null===this._audio)throw new L;return this._audio}}]),e}(),H=function(e){(0,v.Z)(n,e);var t=N(n);function n(e){var r=e.audio,a=e.autoMount,o=e.clip,s=e.consumptionSource,l=e.decorateClipAudioUrl,u=e.onConsumptionError,c=e.trafficBaseUrl,d=e.disableConsumptionAnalytics;return(0,i.Z)(this,n),t.call(this,{audio:r,clip:o,autoMount:a,consumptionSource:s,decorateClipAudioUrl:l,onConsumptionError:u,trafficBaseUrl:c,disableConsumptionAnalytics:d})}return(0,o.Z)(n,[{key:"setClip",value:function(e){this._setClip(e)}}]),n}(z),V=function(e){(0,v.Z)(c,e);var t,n,r,l=N(c);function c(e){var t,n,r=e.accessToken,a=e.audio,o=e.autoMount,u=e.consumptionSource,d=e.decorateClipAudioUrl,p=e.trafficBaseUrl,f=e.getPlaylistClips,y=e.initialClipId,m=e.onConsumptionError,v=e.playlist,g=e.playlistPage,b=e.disableConsumptionAnalytics;(0,i.Z)(this,c);var _=g.Clips;if(0===_.length)throw Error("No initial clips");var S=null!==(t=_.find(function(e){return e.Id===y}))&&void 0!==t?t:_[0];return n=l.call(this,{audio:a,clip:S,autoMount:o,consumptionSource:u,decorateClipAudioUrl:d,trafficBaseUrl:p,onConsumptionError:m,disableConsumptionAnalytics:b}),(0,s.Z)((0,h.Z)(n),"_accessToken",void 0),(0,s.Z)((0,h.Z)(n),"_clips",void 0),(0,s.Z)((0,h.Z)(n),"_clipsLoadErrorObservable",(0,D._)()),(0,s.Z)((0,h.Z)(n),"_clipsLoadObservable",(0,D._)()),(0,s.Z)((0,h.Z)(n),"_clipsLoadStartObservable",(0,D._)()),(0,s.Z)((0,h.Z)(n),"_getPlaylistClips",void 0),(0,s.Z)((0,h.Z)(n),"_loadingClips",!1),(0,s.Z)((0,h.Z)(n),"_nextPagination",void 0),(0,s.Z)((0,h.Z)(n),"_playlist",void 0),(0,s.Z)((0,h.Z)(n),"_previousPagination",void 0),n._accessToken=r,n._clips=_.slice(),n._getPlaylistClips=f,n._nextPagination={disabled:!g.NextClipsAvailable,error:!1,loading:!1},n._playlist=v,n._previousPagination={disabled:!g.PreviousClipsAvailable,error:!1,loading:!1},n}return(0,o.Z)(c,[{key:"loadPreviousClips",value:(t=(0,a.Z)(u().mark(function e(t){var n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._assertNotDestroyed(),n=this._clips[0].Id,this._loadMoreClips({targetClipId:n,pageSize:t,pagination:this._previousPagination,apiDirection:"BeforeExclusive",hasClipsAvailable:function(e){return e.PreviousClipsAvailable},mergeClips:function(e,t){return[].concat((0,f.Z)(t),(0,f.Z)(e))}});case 3:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"loadNextClips",value:(n=(0,a.Z)(u().mark(function e(t){var n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._assertNotDestroyed(),n=this._clips[this._clips.length-1].Id,this._loadMoreClips({targetClipId:n,pageSize:t,pagination:this._nextPagination,apiDirection:"AfterExclusive",hasClipsAvailable:function(e){return e.NextClipsAvailable},mergeClips:function(e,t){return[].concat((0,f.Z)(e),(0,f.Z)(t))}});case 3:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"clips",get:function(){return this._assertNotDestroyed(),this._clips}},{key:"currentClipIndex",set:function(e){if(this._assertNotDestroyed(),!(e<0)&&!(e>=this._clips.length)){var t=this._clips[e];t!==this.clip&&this._setClip(t)}}},{key:"nextClipsDisabled",get:function(){return this._assertNotDestroyed(),this._nextPagination.disabled}},{key:"nextClipsError",get:function(){return this._assertNotDestroyed(),this._nextPagination.error}},{key:"nextClipsLoading",get:function(){return this._assertNotDestroyed(),this._nextPagination.loading}},{key:"playlist",get:function(){return this._assertNotDestroyed(),this._playlist}},{key:"previousClipsDisabled",get:function(){return this._assertNotDestroyed(),this._previousPagination.disabled}},{key:"previousClipsError",get:function(){return this._assertNotDestroyed(),this._previousPagination.error}},{key:"previousClipsLoading",get:function(){return this._assertNotDestroyed(),this._previousPagination.loading}},{key:"onClipChange",get:function(){return this._assertNotDestroyed(),this._clipChangeObservable.observe}},{key:"onClipsLoadStart",get:function(){return this._assertNotDestroyed(),this._clipsLoadStartObservable.observe}},{key:"onClipsLoadError",get:function(){return this._assertNotDestroyed(),this._clipsLoadErrorObservable.observe}},{key:"onClipsLoad",get:function(){return this._assertNotDestroyed(),this._clipsLoadObservable.observe}},{key:"destroy",value:function(){this._clipChangeObservable.removeObservers(),this._clipsLoadErrorObservable.removeObservers(),this._clipsLoadObservable.removeObservers(),this._clipsLoadStartObservable.removeObservers(),(0,y.Z)((0,b.Z)(c.prototype),"destroy",this).call(this)}},{key:"_loadMoreClips",value:(r=(0,a.Z)(u().mark(function e(t){var n,r,a,i,o,s,l,c;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.targetClipId,r=t.pageSize,a=t.pagination,i=t.apiDirection,o=t.hasClipsAvailable,s=t.mergeClips,!this._loadingClips){e.next=3;break}return e.abrupt("return");case 3:if(this._loadingClips=!0,!a.disabled){e.next=6;break}return e.abrupt("return");case 6:return a.error=!1,a.loading=!0,this._clipsLoadStartObservable.dispatch(),e.next=11,this._getPlaylistClips({accessToken:this._accessToken,playlistId:this._playlist.Id,orgId:this._playlist.OrganizationId,clipId:n,direction:i,pageSize:r,includeProgramDetail:!0});case 11:if(l=e.sent,a.loading=!1,this._loadingClips=!1,l.success){e.next=18;break}return a.error=!0,this._clipsLoadErrorObservable.dispatch(),e.abrupt("return");case 18:c=l.payload,o(c)||(a.disabled=!0),this._clips=s(this._clips,c.Clips),this._clipsLoadObservable.dispatch();case 22:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})}]),c}(z);function F(){return Math.round(new Date().getTime()/1e3)}function q(e,t){j.env.SDK_BUILD||S.n_({category:U.YY,message:e,data:t})}var X=function(){function e(t){(0,i.Z)(this,e),(0,s.Z)(this,"_options",void 0),this._options=t}return(0,o.Z)(e,[{key:"createClipPlayer",value:function(e){return new H({audio:this._createAudio(),autoMount:this._options.autoMount,clip:e,consumptionSource:this._options.consumptionSource,decorateClipAudioUrl:this._options.decorateClipAudioUrl,onConsumptionError:this._options.onConsumptionError,trafficBaseUrl:this._options.trafficBaseUrl,disableConsumptionAnalytics:this._options.disableConsumptionAnalytics})}},{key:"createPlaylistPlayer",value:function(e,t,n){var r,i=this;return new V({accessToken:this._options.accessToken,audio:this._createAudio(),autoMount:this._options.autoMount,consumptionSource:this._options.consumptionSource,decorateClipAudioUrl:this._options.decorateClipAudioUrl,getPlaylistClips:(r=(0,a.Z)(u().mark(function e(t){var n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.AW)(t)(null!==(n=i._options.apiMiddleware)&&void 0!==n?n:d));case 1:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),initialClipId:n,onConsumptionError:this._options.onConsumptionError,playlist:e,playlistPage:t,trafficBaseUrl:this._options.trafficBaseUrl,disableConsumptionAnalytics:this._options.disableConsumptionAnalytics})}},{key:"_createAudio",value:function(){return p.P3.isSupported()?new p.P3(document.createElement("audio")):new p.Wk}}]),e}()}}]);
